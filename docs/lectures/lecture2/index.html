<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">

<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"/>
  <meta name="generator" content="distill" />

  <style type="text/css">
  /* Hide doc at startup (prevent jankiness while JS renders/transforms) */
  body {
    visibility: hidden;
  }
  </style>

 <!--radix_placeholder_import_source-->
 <!--/radix_placeholder_import_source-->

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ad0000; } /* Alert */
code span.an { color: #5e5e5e; } /* Annotation */
code span.at { color: #20794d; } /* Attribute */
code span.bn { color: #ad0000; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007ba5; } /* ControlFlow */
code span.ch { color: #20794d; } /* Char */
code span.cn { color: #8f5902; } /* Constant */
code span.co { color: #5e5e5e; } /* Comment */
code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
code span.dt { color: #ad0000; } /* DataType */
code span.dv { color: #ad0000; } /* DecVal */
code span.er { color: #ad0000; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #ad0000; } /* Float */
code span.fu { color: #4758ab; } /* Function */
code span.im { } /* Import */
code span.in { color: #5e5e5e; } /* Information */
code span.kw { color: #007ba5; } /* Keyword */
code span.op { color: #5e5e5e; } /* Operator */
code span.ot { color: #007ba5; } /* Other */
code span.pp { color: #ad0000; } /* Preprocessor */
code span.sc { color: #20794d; } /* SpecialChar */
code span.ss { color: #20794d; } /* SpecialString */
code span.st { color: #20794d; } /* String */
code span.va { color: #111111; } /* Variable */
code span.vs { color: #20794d; } /* VerbatimString */
code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
</style>

  <!--radix_placeholder_meta_tags-->
<title>Introduction to Data Analysis with R: Lecture 2</title>

<meta property="description" itemprop="description" content="... in which we explore the typical data analysis workflow&#10;with the tidyverse, wrangle different kinds of data and&#10;learn about factors."/>

<link rel="canonical" href="https://jmbuhr.de/dataIntro20/lectures/lecture2/"/>
<link rel="license" href="https://creativecommons.org/licenses/by/4.0/"/>
<link rel="icon" type="image/png" href="../../images/favicon.png"/>

<!--  https://schema.org/Article -->
<meta property="article:published" itemprop="datePublished" content="2020-11-07"/>
<meta property="article:created" itemprop="dateCreated" content="2020-11-07"/>
<meta name="article:author" content="Jannik Buhr"/>

<!--  https://developers.facebook.com/docs/sharing/webmasters#markup -->
<meta property="og:title" content="Introduction to Data Analysis with R: Lecture 2"/>
<meta property="og:type" content="article"/>
<meta property="og:description" content="... in which we explore the typical data analysis workflow&#10;with the tidyverse, wrangle different kinds of data and&#10;learn about factors."/>
<meta property="og:url" content="https://jmbuhr.de/dataIntro20/lectures/lecture2/"/>
<meta property="og:image" content="https://jmbuhr.de/dataIntro20/lectures/lecture2/lecture2_files/figure-html5/prev-plt-1.png"/>
<meta property="og:image:width" content="1248"/>
<meta property="og:image:height" content="768"/>
<meta property="og:locale" content="en_US"/>
<meta property="og:site_name" content="Introduction to Data Analysis with R"/>

<!--  https://dev.twitter.com/cards/types/summary -->
<meta property="twitter:card" content="summary_large_image"/>
<meta property="twitter:title" content="Introduction to Data Analysis with R: Lecture 2"/>
<meta property="twitter:description" content="... in which we explore the typical data analysis workflow&#10;with the tidyverse, wrangle different kinds of data and&#10;learn about factors."/>
<meta property="twitter:url" content="https://jmbuhr.de/dataIntro20/lectures/lecture2/"/>
<meta property="twitter:image" content="https://jmbuhr.de/dataIntro20/lectures/lecture2/lecture2_files/figure-html5/prev-plt-1.png"/>
<meta property="twitter:image:width" content="1248"/>
<meta property="twitter:image:height" content="768"/>
<meta property="twitter:site" content="@jannikbuhr"/>

<!--  https://scholar.google.com/intl/en/scholar/inclusion.html#indexing -->
<meta name="citation_title" content="Introduction to Data Analysis with R: Lecture 2"/>
<meta name="citation_fulltext_html_url" content="https://jmbuhr.de/dataIntro20/lectures/lecture2/"/>
<meta name="citation_fulltext_world_readable" content=""/>
<meta name="citation_online_date" content="2020/11/07"/>
<meta name="citation_publication_date" content="2020/11/07"/>
<meta name="citation_author" content="Jannik Buhr"/>
<!--/radix_placeholder_meta_tags-->
  
  <meta name="citation_reference" content="citation_title=Gapminder: Data from gapminder;citation_publication_date=2017;citation_author=Jennifer Bryan"/>
  <meta name="citation_reference" content="citation_title=R for Data Science: Import, Tidy, Transform, Visualize, and Model Data;citation_publication_date=2017;citation_publisher=O’Reilly Media;citation_author=Hadley Wickham;citation_author=Garrett Grolemund"/>
  <!--radix_placeholder_rmarkdown_metadata-->

<script type="text/json" id="radix-rmarkdown-metadata">
{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["creative_commons","title","description","draft","author","date","output","categories","bibliography","citation_url","canonical_url"]}},"value":[{"type":"character","attributes":{},"value":["CC BY"]},{"type":"character","attributes":{},"value":["Lecture 2"]},{"type":"character","attributes":{},"value":["... in which we explore the typical data analysis workflow\nwith the tidyverse, wrangle different kinds of data and\nlearn about factors."]},{"type":"logical","attributes":{},"value":[false]},{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","url"]}},"value":[{"type":"character","attributes":{},"value":["Jannik Buhr"]},{"type":"character","attributes":{},"value":["https://jmbuhr.de"]}]}]},{"type":"character","attributes":{},"value":["11-07-2020"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["distill::distill_article"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["self_contained","toc"]}},"value":[{"type":"logical","attributes":{},"value":[false]},{"type":"logical","attributes":{},"value":[true]}]}]},{"type":"character","attributes":{},"value":["lecture"]},{"type":"character","attributes":{},"value":["../../references.bib"]},{"type":"character","attributes":{},"value":["https://jmbuhr.de/dataIntro20/lectures/lecture2/"]},{"type":"character","attributes":{},"value":["https://jmbuhr.de/dataIntro20/lectures/lecture2/"]}]}
</script>
<!--/radix_placeholder_rmarkdown_metadata-->
  
  <script type="text/json" id="radix-resource-manifest">
  {"type":"character","attributes":{},"value":["data/country_colors.csv","data/exercise1_raw.csv","data/exercise1.txt","data/gapminder_csv2.csv","data/gapminder_messier.csv","data/gapminder_tsv.txt","data/gapminder.csv","data/gapminder.xlsx","data/obscure_file.tsv","extra.css","img/download_repo.png","img/dplyr_filter.jpg","img/dplyr_wrangling.png","img/dplyr.png","img/forcats.png","img/github-raw.png","img/readr.png","img/RS_settings.png","img/RS_settings2.png","img/workflow-wickham.png","lecture2_files/anchor-4.2.2/anchor.min.js","lecture2_files/bowser-1.9.3/bowser.min.js","lecture2_files/distill-2.2.21/template.v2.js","lecture2_files/figure-html5/prev-plt-1.png","lecture2_files/figure-html5/unnamed-chunk-43-1.png","lecture2_files/figure-html5/unnamed-chunk-44-1.png","lecture2_files/figure-html5/unnamed-chunk-48-1.png","lecture2_files/figure-html5/unnamed-chunk-49-1.png","lecture2_files/figure-html5/unnamed-chunk-53-1.png","lecture2_files/figure-html5/unnamed-chunk-54-1.png","lecture2_files/header-attrs-2.3/header-attrs.js","lecture2_files/header-attrs-2.4/header-attrs.js","lecture2_files/header-attrs-2.5.3/header-attrs.js","lecture2_files/jquery-1.11.3/jquery.min.js","lecture2_files/webcomponents-2.0.0/webcomponents.js","libs/animate.css/animate.xaringan.css","libs/clipboard/clipboard.min.js","libs/editable/editable.css","libs/editable/editable.js","libs/header-attrs/header-attrs.js","libs/himalaya/himalaya.js","libs/himalaya/himalaya.js.map","libs/js-cookie/js.cookie.js","libs/tachyons/tachyons.min.css","libs/tile-view/tile-view.css","libs/tile-view/tile-view.js","libs/xaringanExtra-clipboard/xaringanExtra-clipboard.css","libs/xaringanExtra-clipboard/xaringanExtra-clipboard.js","R/create_data_formats.R","slides2.html","xaringan-themer.css"]}
  </script>
  <!--radix_placeholder_navigation_in_header-->
<meta name="distill:offset" content="../.."/>

<script type="application/javascript">

  window.headroom_prevent_pin = false;

  window.document.addEventListener("DOMContentLoaded", function (event) {

    // initialize headroom for banner
    var header = $('header').get(0);
    var headerHeight = header.offsetHeight;
    var headroom = new Headroom(header, {
      tolerance: 5,
      onPin : function() {
        if (window.headroom_prevent_pin) {
          window.headroom_prevent_pin = false;
          headroom.unpin();
        }
      }
    });
    headroom.init();
    if(window.location.hash)
      headroom.unpin();
    $(header).addClass('headroom--transition');

    // offset scroll location for banner on hash change
    // (see: https://github.com/WickyNilliams/headroom.js/issues/38)
    window.addEventListener("hashchange", function(event) {
      window.scrollTo(0, window.pageYOffset - (headerHeight + 25));
    });

    // responsive menu
    $('.distill-site-header').each(function(i, val) {
      var topnav = $(this);
      var toggle = topnav.find('.nav-toggle');
      toggle.on('click', function() {
        topnav.toggleClass('responsive');
      });
    });

    // nav dropdowns
    $('.nav-dropbtn').click(function(e) {
      $(this).next('.nav-dropdown-content').toggleClass('nav-dropdown-active');
      $(this).parent().siblings('.nav-dropdown')
         .children('.nav-dropdown-content').removeClass('nav-dropdown-active');
    });
    $("body").click(function(e){
      $('.nav-dropdown-content').removeClass('nav-dropdown-active');
    });
    $(".nav-dropdown").click(function(e){
      e.stopPropagation();
    });
  });
</script>

<style type="text/css">

/* Theme (user-documented overrideables for nav appearance) */

.distill-site-nav {
  color: rgba(255, 255, 255, 0.8);
  background-color: #0F2E3D;
  font-size: 15px;
  font-weight: 300;
}

.distill-site-nav a {
  color: inherit;
  text-decoration: none;
}

.distill-site-nav a:hover {
  color: white;
}

@media print {
  .distill-site-nav {
    display: none;
  }
}

.distill-site-header {

}

.distill-site-footer {

}


/* Site Header */

.distill-site-header {
  width: 100%;
  box-sizing: border-box;
  z-index: 3;
}

.distill-site-header .nav-left {
  display: inline-block;
  margin-left: 8px;
}

@media screen and (max-width: 768px) {
  .distill-site-header .nav-left {
    margin-left: 0;
  }
}


.distill-site-header .nav-right {
  float: right;
  margin-right: 8px;
}

.distill-site-header a,
.distill-site-header .title {
  display: inline-block;
  text-align: center;
  padding: 14px 10px 14px 10px;
}

.distill-site-header .title {
  font-size: 18px;
  min-width: 150px;
}

.distill-site-header .logo {
  padding: 0;
}

.distill-site-header .logo img {
  display: none;
  max-height: 20px;
  width: auto;
  margin-bottom: -4px;
}

.distill-site-header .nav-image img {
  max-height: 18px;
  width: auto;
  display: inline-block;
  margin-bottom: -3px;
}



@media screen and (min-width: 1000px) {
  .distill-site-header .logo img {
    display: inline-block;
  }
  .distill-site-header .nav-left {
    margin-left: 20px;
  }
  .distill-site-header .nav-right {
    margin-right: 20px;
  }
  .distill-site-header .title {
    padding-left: 12px;
  }
}


.distill-site-header .nav-toggle {
  display: none;
}

.nav-dropdown {
  display: inline-block;
  position: relative;
}

.nav-dropdown .nav-dropbtn {
  border: none;
  outline: none;
  color: rgba(255, 255, 255, 0.8);
  padding: 16px 10px;
  background-color: transparent;
  font-family: inherit;
  font-size: inherit;
  font-weight: inherit;
  margin: 0;
  margin-top: 1px;
  z-index: 2;
}

.nav-dropdown-content {
  display: none;
  position: absolute;
  background-color: white;
  min-width: 200px;
  border: 1px solid rgba(0,0,0,0.15);
  border-radius: 4px;
  box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.1);
  z-index: 1;
  margin-top: 2px;
  white-space: nowrap;
  padding-top: 4px;
  padding-bottom: 4px;
}

.nav-dropdown-content hr {
  margin-top: 4px;
  margin-bottom: 4px;
  border: none;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

.nav-dropdown-active {
  display: block;
}

.nav-dropdown-content a, .nav-dropdown-content .nav-dropdown-header {
  color: black;
  padding: 6px 24px;
  text-decoration: none;
  display: block;
  text-align: left;
}

.nav-dropdown-content .nav-dropdown-header {
  display: block;
  padding: 5px 24px;
  padding-bottom: 0;
  text-transform: uppercase;
  font-size: 14px;
  color: #999999;
  white-space: nowrap;
}

.nav-dropdown:hover .nav-dropbtn {
  color: white;
}

.nav-dropdown-content a:hover {
  background-color: #ddd;
  color: black;
}

.nav-right .nav-dropdown-content {
  margin-left: -45%;
  right: 0;
}

@media screen and (max-width: 768px) {
  .distill-site-header a, .distill-site-header .nav-dropdown  {display: none;}
  .distill-site-header a.nav-toggle {
    float: right;
    display: block;
  }
  .distill-site-header .title {
    margin-left: 0;
  }
  .distill-site-header .nav-right {
    margin-right: 0;
  }
  .distill-site-header {
    overflow: hidden;
  }
  .nav-right .nav-dropdown-content {
    margin-left: 0;
  }
}


@media screen and (max-width: 768px) {
  .distill-site-header.responsive {position: relative; min-height: 500px; }
  .distill-site-header.responsive a.nav-toggle {
    position: absolute;
    right: 0;
    top: 0;
  }
  .distill-site-header.responsive a,
  .distill-site-header.responsive .nav-dropdown {
    display: block;
    text-align: left;
  }
  .distill-site-header.responsive .nav-left,
  .distill-site-header.responsive .nav-right {
    width: 100%;
  }
  .distill-site-header.responsive .nav-dropdown {float: none;}
  .distill-site-header.responsive .nav-dropdown-content {position: relative;}
  .distill-site-header.responsive .nav-dropdown .nav-dropbtn {
    display: block;
    width: 100%;
    text-align: left;
  }
}

/* Site Footer */

.distill-site-footer {
  width: 100%;
  overflow: hidden;
  box-sizing: border-box;
  z-index: 3;
  margin-top: 30px;
  padding-top: 30px;
  padding-bottom: 30px;
  text-align: center;
}

/* Headroom */

d-title {
  padding-top: 6rem;
}

@media print {
  d-title {
    padding-top: 4rem;
  }
}

.headroom {
  z-index: 1000;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
}

.headroom--transition {
  transition: all .4s ease-in-out;
}

.headroom--unpinned {
  top: -100px;
}

.headroom--pinned {
  top: 0;
}

</style>

<link href="../../site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet"/>
<link href="../../site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet"/>
<script src="../../site_libs/headroom-0.9.4/headroom.min.js"></script>
<script src="../../site_libs/autocomplete-0.37.1/autocomplete.min.js"></script>
<script src="../../site_libs/fuse-6.4.1/fuse.min.js"></script>

<script type="application/javascript">

function getMeta(metaName) {
  var metas = document.getElementsByTagName('meta');
  for (let i = 0; i < metas.length; i++) {
    if (metas[i].getAttribute('name') === metaName) {
      return metas[i].getAttribute('content');
    }
  }
  return '';
}

function offsetURL(url) {
  var offset = getMeta('distill:offset');
  return offset ? offset + '/' + url : url;
}

function createFuseIndex() {

  // create fuse index
  var options = {
    keys: [
      { name: 'title', weight: 20 },
      { name: 'categories', weight: 15 },
      { name: 'description', weight: 10 },
      { name: 'contents', weight: 5 },
    ],
    ignoreLocation: true,
    threshold: 0
  };
  var fuse = new window.Fuse([], options);

  // fetch the main search.json
  return fetch(offsetURL('search.json'))
    .then(function(response) {
      if (response.status == 200) {
        return response.json().then(function(json) {
          // index main articles
          json.articles.forEach(function(article) {
            fuse.add(article);
          });
          // download collections and index their articles
          return Promise.all(json.collections.map(function(collection) {
            return fetch(offsetURL(collection)).then(function(response) {
              if (response.status === 200) {
                return response.json().then(function(articles) {
                  articles.forEach(function(article) {
                    fuse.add(article);
                  });
                })
              } else {
                return Promise.reject(
                  new Error('Unexpected status from search index request: ' +
                            response.status)
                );
              }
            });
          })).then(function() {
            return fuse;
          });
        });

      } else {
        return Promise.reject(
          new Error('Unexpected status from search index request: ' +
                      response.status)
        );
      }
    });
}

window.document.addEventListener("DOMContentLoaded", function (event) {

  // get search element (bail if we don't have one)
  var searchEl = window.document.getElementById('distill-search');
  if (!searchEl)
    return;

  createFuseIndex()
    .then(function(fuse) {

      // make search box visible
      searchEl.classList.remove('hidden');

      // initialize autocomplete
      var options = {
        autoselect: true,
        hint: false,
        minLength: 2,
      };
      window.autocomplete(searchEl, options, [{
        source: function(query, callback) {
          const searchOptions = {
            isCaseSensitive: false,
            shouldSort: true,
            minMatchCharLength: 2,
            limit: 10,
          };
          var results = fuse.search(query, searchOptions);
          callback(results
            .map(function(result) { return result.item; })
            .filter(function(item) { return !!item.description; })
          );
        },
        templates: {
          suggestion: function(suggestion) {
            var html = `
              <div class="search-item">
                <h3>${suggestion.title}</h3>
                <div class="search-item-description">
                  ${suggestion.description}
                </div>
                <div class="search-item-preview">
                  <img src="${suggestion.preview ? offsetURL(suggestion.preview) : ''}"</img>
                </div>
              </div>
            `;
            return html;
          }
        }
      }]).on('autocomplete:selected', function(event, suggestion) {
        window.location.href = offsetURL(suggestion.path);
      });
      // remove inline display style on autocompleter (we want to
      // manage responsive display via css)
      $('.algolia-autocomplete').css("display", "");
    })
    .catch(function(error) {
      console.log(error);
    });

});

</script>

<style type="text/css">

/* Algolioa Autocomplete */

.algolia-autocomplete {
  display: inline-block;
  margin-left: 10px;
  vertical-align: sub;
  background-color: white;
  color: black;
  padding: 6px;
  padding-top: 8px;
  padding-bottom: 0;
  border-radius: 6px;
  border: 1px #0F2E3D solid;
  width: 180px;
}


@media screen and (max-width: 768px) {
  .distill-site-nav .algolia-autocomplete {
    display: none;
    visibility: hidden;
  }
  .distill-site-nav.responsive .algolia-autocomplete {
    display: inline-block;
    visibility: visible;
  }
  .distill-site-nav.responsive .algolia-autocomplete .aa-dropdown-menu {
    margin-left: 0;
    width: 400px;
    max-height: 400px;
  }
}

.algolia-autocomplete .aa-input, .algolia-autocomplete .aa-hint {
  width: 90%;
  outline: none;
  border: none;
}

.algolia-autocomplete .aa-hint {
  color: #999;
}
.algolia-autocomplete .aa-dropdown-menu {
  width: 550px;
  max-height: 70vh;
  overflow-x: visible;
  overflow-y: scroll;
  padding: 5px;
  margin-top: 3px;
  margin-left: -150px;
  background-color: #fff;
  border-radius: 5px;
  border: 1px solid #999;
  border-top: none;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion {
  cursor: pointer;
  padding: 5px 4px;
  border-bottom: 1px solid #eee;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion:last-of-type {
  border-bottom: none;
  margin-bottom: 2px;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item {
  overflow: hidden;
  font-size: 0.8em;
  line-height: 1.4em;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item h3 {
  margin-block-start: 0;
  margin-block-end: 5px;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-description {
  display: inline-block;
  overflow: hidden;
  height: 2.8em;
  width: 80%;
  margin-right: 4%;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview {
  display: inline-block;
  width: 15%;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview img {
  height: 3em;
  width: auto;
  display: none;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview img[src] {
  display: initial;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion.aa-cursor {
  background-color: #eee;
}
.algolia-autocomplete .aa-dropdown-menu .aa-suggestion em {
  font-weight: bold;
  font-style: normal;
}

</style>


<!--/radix_placeholder_navigation_in_header-->
  <!--radix_placeholder_distill-->

<style type="text/css">

body {
  background-color: white;
}

.pandoc-table {
  width: 100%;
}

.pandoc-table>caption {
  margin-bottom: 10px;
}

.pandoc-table th:not([align]) {
  text-align: left;
}

.pagedtable-footer {
  font-size: 15px;
}

d-byline .byline {
  grid-template-columns: 2fr 2fr;
}

d-byline .byline h3 {
  margin-block-start: 1.5em;
}

d-byline .byline .authors-affiliations h3 {
  margin-block-start: 0.5em;
}

.authors-affiliations .orcid-id {
  width: 16px;
  height:16px;
  margin-left: 4px;
  margin-right: 4px;
  vertical-align: middle;
  padding-bottom: 2px;
}

d-title .dt-tags {
  margin-top: 1em;
  grid-column: text;
}

.dt-tags .dt-tag {
  text-decoration: none;
  display: inline-block;
  color: rgba(0,0,0,0.6);
  padding: 0em 0.4em;
  margin-right: 0.5em;
  margin-bottom: 0.4em;
  font-size: 70%;
  border: 1px solid rgba(0,0,0,0.2);
  border-radius: 3px;
  text-transform: uppercase;
  font-weight: 500;
}

d-article table.gt_table td,
d-article table.gt_table th {
  border-bottom: none;
}

.html-widget {
  margin-bottom: 2.0em;
}

.l-screen-inset {
  padding-right: 16px;
}

.l-screen .caption {
  margin-left: 10px;
}

.shaded {
  background: rgb(247, 247, 247);
  padding-top: 20px;
  padding-bottom: 20px;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

.shaded .html-widget {
  margin-bottom: 0;
  border: 1px solid rgba(0, 0, 0, 0.1);
}

.shaded .shaded-content {
  background: white;
}

.text-output {
  margin-top: 0;
  line-height: 1.5em;
}

.hidden {
  display: none !important;
}

d-article {
  padding-top: 2.5rem;
  padding-bottom: 30px;
}

d-appendix {
  padding-top: 30px;
}

d-article>p>img {
  width: 100%;
}

d-article h2 {
  margin: 1rem 0 1.5rem 0;
}

d-article h3 {
  margin-top: 1.5rem;
}

d-article iframe {
  border: 1px solid rgba(0, 0, 0, 0.1);
  margin-bottom: 2.0em;
  width: 100%;
}

/* Tweak code blocks */

d-article div.sourceCode code,
d-article pre code {
  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
}

d-article pre,
d-article div.sourceCode,
d-article div.sourceCode pre {
  overflow: auto;
}

d-article div.sourceCode {
  background-color: white;
}

d-article div.sourceCode pre {
  padding-left: 10px;
  font-size: 12px;
  border-left: 2px solid rgba(0,0,0,0.1);
}

d-article pre {
  font-size: 12px;
  color: black;
  background: none;
  margin-top: 0;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.5;

  -moz-tab-size: 4;
  -o-tab-size: 4;
  tab-size: 4;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

d-article pre a {
  border-bottom: none;
}

d-article pre a:hover {
  border-bottom: none;
  text-decoration: underline;
}

@media(min-width: 768px) {

d-article pre,
d-article div.sourceCode,
d-article div.sourceCode pre {
  overflow: visible !important;
}

d-article div.sourceCode pre {
  padding-left: 18px;
  font-size: 14px;
}

d-article pre {
  font-size: 14px;
}

}

figure img.external {
  background: white;
  border: 1px solid rgba(0, 0, 0, 0.1);
  box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
  padding: 18px;
  box-sizing: border-box;
}

/* CSS for d-contents */

.d-contents {
  grid-column: text;
  color: rgba(0,0,0,0.8);
  font-size: 0.9em;
  padding-bottom: 1em;
  margin-bottom: 1em;
  padding-bottom: 0.5em;
  margin-bottom: 1em;
  padding-left: 0.25em;
  justify-self: start;
}

@media(min-width: 1000px) {
  .d-contents.d-contents-float {
    height: 0;
    grid-column-start: 1;
    grid-column-end: 4;
    justify-self: center;
    padding-right: 3em;
    padding-left: 2em;
  }
}

.d-contents nav h3 {
  font-size: 18px;
  margin-top: 0;
  margin-bottom: 1em;
}

.d-contents li {
  list-style-type: none
}

.d-contents nav > ul {
  padding-left: 0;
}

.d-contents ul {
  padding-left: 1em
}

.d-contents nav ul li {
  margin-top: 0.6em;
  margin-bottom: 0.2em;
}

.d-contents nav a {
  font-size: 13px;
  border-bottom: none;
  text-decoration: none
  color: rgba(0, 0, 0, 0.8);
}

.d-contents nav a:hover {
  text-decoration: underline solid rgba(0, 0, 0, 0.6)
}

.d-contents nav > ul > li > a {
  font-weight: 600;
}

.d-contents nav > ul > li > ul {
  font-weight: inherit;
}

.d-contents nav > ul > li > ul > li {
  margin-top: 0.2em;
}


.d-contents nav ul {
  margin-top: 0;
  margin-bottom: 0.25em;
}

.d-article-with-toc h2:nth-child(2) {
  margin-top: 0;
}


/* Figure */

.figure {
  position: relative;
  margin-bottom: 2.5em;
  margin-top: 1.5em;
}

.figure img {
  width: 100%;
}

.figure .caption {
  color: rgba(0, 0, 0, 0.6);
  font-size: 12px;
  line-height: 1.5em;
}

.figure img.external {
  background: white;
  border: 1px solid rgba(0, 0, 0, 0.1);
  box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
  padding: 18px;
  box-sizing: border-box;
}

.figure .caption a {
  color: rgba(0, 0, 0, 0.6);
}

.figure .caption b,
.figure .caption strong, {
  font-weight: 600;
  color: rgba(0, 0, 0, 1.0);
}

/* Citations */

d-article .citation {
  color: inherit;
  cursor: inherit;
}

div.hanging-indent{
  margin-left: 1em; text-indent: -1em;
}


/* Tweak 1000px media break to show more text */

@media(min-width: 1000px) {
  .base-grid,
  distill-header,
  d-title,
  d-abstract,
  d-article,
  d-appendix,
  distill-appendix,
  d-byline,
  d-footnote-list,
  d-citation-list,
  distill-footer {
    grid-template-columns: [screen-start] 1fr [page-start kicker-start] 80px [middle-start] 50px [text-start kicker-end] 65px 65px 65px 65px 65px 65px 65px 65px [text-end gutter-start] 65px [middle-end] 65px [page-end gutter-end] 1fr [screen-end];
    grid-column-gap: 16px;
  }

  .grid {
    grid-column-gap: 16px;
  }

  d-article {
    font-size: 1.06rem;
    line-height: 1.7em;
  }
  figure .caption, .figure .caption, figure figcaption {
    font-size: 13px;
  }
}

@media(min-width: 1180px) {
  .base-grid,
  distill-header,
  d-title,
  d-abstract,
  d-article,
  d-appendix,
  distill-appendix,
  d-byline,
  d-footnote-list,
  d-citation-list,
  distill-footer {
    grid-template-columns: [screen-start] 1fr [page-start kicker-start] 60px [middle-start] 60px [text-start kicker-end] 60px 60px 60px 60px 60px 60px 60px 60px [text-end gutter-start] 60px [middle-end] 60px [page-end gutter-end] 1fr [screen-end];
    grid-column-gap: 32px;
  }

  .grid {
    grid-column-gap: 32px;
  }
}


/* Get the citation styles for the appendix (not auto-injected on render since
   we do our own rendering of the citation appendix) */

d-appendix .citation-appendix,
.d-appendix .citation-appendix {
  font-size: 11px;
  line-height: 15px;
  border-left: 1px solid rgba(0, 0, 0, 0.1);
  padding-left: 18px;
  border: 1px solid rgba(0,0,0,0.1);
  background: rgba(0, 0, 0, 0.02);
  padding: 10px 18px;
  border-radius: 3px;
  color: rgba(150, 150, 150, 1);
  overflow: hidden;
  margin-top: -12px;
  white-space: pre-wrap;
  word-wrap: break-word;
}

/* Include appendix styles here so they can be overridden */

d-appendix {
  contain: layout style;
  font-size: 0.8em;
  line-height: 1.7em;
  margin-top: 60px;
  margin-bottom: 0;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  color: rgba(0,0,0,0.5);
  padding-top: 60px;
  padding-bottom: 48px;
}

d-appendix h3 {
  grid-column: page-start / text-start;
  font-size: 15px;
  font-weight: 500;
  margin-top: 1em;
  margin-bottom: 0;
  color: rgba(0,0,0,0.65);
}

d-appendix h3 + * {
  margin-top: 1em;
}

d-appendix ol {
  padding: 0 0 0 15px;
}

@media (min-width: 768px) {
  d-appendix ol {
    padding: 0 0 0 30px;
    margin-left: -30px;
  }
}

d-appendix li {
  margin-bottom: 1em;
}

d-appendix a {
  color: rgba(0, 0, 0, 0.6);
}

d-appendix > * {
  grid-column: text;
}

d-appendix > d-footnote-list,
d-appendix > d-citation-list,
d-appendix > distill-appendix {
  grid-column: screen;
}

/* Include footnote styles here so they can be overridden */

d-footnote-list {
  contain: layout style;
}

d-footnote-list > * {
  grid-column: text;
}

d-footnote-list a.footnote-backlink {
  color: rgba(0,0,0,0.3);
  padding-left: 0.5em;
}



/* Anchor.js */

.anchorjs-link {
  /*transition: all .25s linear; */
  text-decoration: none;
  border-bottom: none;
}
*:hover > .anchorjs-link {
  margin-left: -1.125em !important;
  text-decoration: none;
  border-bottom: none;
}

/* Social footer */

.social_footer {
  margin-top: 30px;
  margin-bottom: 0;
  color: rgba(0,0,0,0.67);
}

.disqus-comments {
  margin-right: 30px;
}

.disqus-comment-count {
  border-bottom: 1px solid rgba(0, 0, 0, 0.4);
  cursor: pointer;
}

#disqus_thread {
  margin-top: 30px;
}

.article-sharing a {
  border-bottom: none;
  margin-right: 8px;
}

.article-sharing a:hover {
  border-bottom: none;
}

.sidebar-section.subscribe {
  font-size: 12px;
  line-height: 1.6em;
}

.subscribe p {
  margin-bottom: 0.5em;
}


.article-footer .subscribe {
  font-size: 15px;
  margin-top: 45px;
}


.sidebar-section.custom {
  font-size: 12px;
  line-height: 1.6em;
}

.custom p {
  margin-bottom: 0.5em;
}

/* Styles for listing layout (hide title) */
.layout-listing d-title, .layout-listing .d-title {
  display: none;
}

/* Styles for posts lists (not auto-injected) */


.posts-with-sidebar {
  padding-left: 45px;
  padding-right: 45px;
}

.posts-list .description h2,
.posts-list .description p {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
}

.posts-list .description h2 {
  font-weight: 700;
  border-bottom: none;
  padding-bottom: 0;
}

.posts-list h2.post-tag {
  border-bottom: 1px solid rgba(0, 0, 0, 0.2);
  padding-bottom: 12px;
}
.posts-list {
  margin-top: 60px;
  margin-bottom: 24px;
}

.posts-list .post-preview {
  text-decoration: none;
  overflow: hidden;
  display: block;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  padding: 24px 0;
}

.post-preview-last {
  border-bottom: none !important;
}

.posts-list .posts-list-caption {
  grid-column: screen;
  font-weight: 400;
}

.posts-list .post-preview h2 {
  margin: 0 0 6px 0;
  line-height: 1.2em;
  font-style: normal;
  font-size: 24px;
}

.posts-list .post-preview p {
  margin: 0 0 12px 0;
  line-height: 1.4em;
  font-size: 16px;
}

.posts-list .post-preview .thumbnail {
  box-sizing: border-box;
  margin-bottom: 24px;
  position: relative;
  max-width: 500px;
}
.posts-list .post-preview img {
  width: 100%;
  display: block;
}

.posts-list .metadata {
  font-size: 12px;
  line-height: 1.4em;
  margin-bottom: 18px;
}

.posts-list .metadata > * {
  display: inline-block;
}

.posts-list .metadata .publishedDate {
  margin-right: 2em;
}

.posts-list .metadata .dt-authors {
  display: block;
  margin-top: 0.3em;
  margin-right: 2em;
}

.posts-list .dt-tags {
  display: block;
  line-height: 1em;
}

.posts-list .dt-tags .dt-tag {
  display: inline-block;
  color: rgba(0,0,0,0.6);
  padding: 0.3em 0.4em;
  margin-right: 0.2em;
  margin-bottom: 0.4em;
  font-size: 60%;
  border: 1px solid rgba(0,0,0,0.2);
  border-radius: 3px;
  text-transform: uppercase;
  font-weight: 500;
}

.posts-list img {
  opacity: 1;
}

.posts-list img[data-src] {
  opacity: 0;
}

.posts-more {
  clear: both;
}


.posts-sidebar {
  font-size: 16px;
}

.posts-sidebar h3 {
  font-size: 16px;
  margin-top: 0;
  margin-bottom: 0.5em;
  font-weight: 400;
  text-transform: uppercase;
}

.sidebar-section {
  margin-bottom: 30px;
}

.categories ul {
  list-style-type: none;
  margin: 0;
  padding: 0;
}

.categories li {
  color: rgba(0, 0, 0, 0.8);
  margin-bottom: 0;
}

.categories li>a {
  border-bottom: none;
}

.categories li>a:hover {
  border-bottom: 1px solid rgba(0, 0, 0, 0.4);
}

.categories .active {
  font-weight: 600;
}

.categories .category-count {
  color: rgba(0, 0, 0, 0.4);
}


@media(min-width: 768px) {
  .posts-list .post-preview h2 {
    font-size: 26px;
  }
  .posts-list .post-preview .thumbnail {
    float: right;
    width: 30%;
    margin-bottom: 0;
  }
  .posts-list .post-preview .description {
    float: left;
    width: 45%;
  }
  .posts-list .post-preview .metadata {
    float: left;
    width: 20%;
    margin-top: 8px;
  }
  .posts-list .post-preview p {
    margin: 0 0 12px 0;
    line-height: 1.5em;
    font-size: 16px;
  }
  .posts-with-sidebar .posts-list {
    float: left;
    width: 75%;
  }
  .posts-with-sidebar .posts-sidebar {
    float: right;
    width: 20%;
    margin-top: 60px;
    padding-top: 24px;
    padding-bottom: 24px;
  }
}


/* Improve display for browsers without grid (IE/Edge <= 15) */

.downlevel {
  line-height: 1.6em;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
  margin: 0;
}

.downlevel .d-title {
  padding-top: 6rem;
  padding-bottom: 1.5rem;
}

.downlevel .d-title h1 {
  font-size: 50px;
  font-weight: 700;
  line-height: 1.1em;
  margin: 0 0 0.5rem;
}

.downlevel .d-title p {
  font-weight: 300;
  font-size: 1.2rem;
  line-height: 1.55em;
  margin-top: 0;
}

.downlevel .d-byline {
  padding-top: 0.8em;
  padding-bottom: 0.8em;
  font-size: 0.8rem;
  line-height: 1.8em;
}

.downlevel .section-separator {
  border: none;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
}

.downlevel .d-article {
  font-size: 1.06rem;
  line-height: 1.7em;
  padding-top: 1rem;
  padding-bottom: 2rem;
}


.downlevel .d-appendix {
  padding-left: 0;
  padding-right: 0;
  max-width: none;
  font-size: 0.8em;
  line-height: 1.7em;
  margin-bottom: 0;
  color: rgba(0,0,0,0.5);
  padding-top: 40px;
  padding-bottom: 48px;
}

.downlevel .footnotes ol {
  padding-left: 13px;
}

.downlevel .base-grid,
.downlevel .distill-header,
.downlevel .d-title,
.downlevel .d-abstract,
.downlevel .d-article,
.downlevel .d-appendix,
.downlevel .distill-appendix,
.downlevel .d-byline,
.downlevel .d-footnote-list,
.downlevel .d-citation-list,
.downlevel .distill-footer,
.downlevel .appendix-bottom,
.downlevel .posts-container {
  padding-left: 40px;
  padding-right: 40px;
}

@media(min-width: 768px) {
  .downlevel .base-grid,
  .downlevel .distill-header,
  .downlevel .d-title,
  .downlevel .d-abstract,
  .downlevel .d-article,
  .downlevel .d-appendix,
  .downlevel .distill-appendix,
  .downlevel .d-byline,
  .downlevel .d-footnote-list,
  .downlevel .d-citation-list,
  .downlevel .distill-footer,
  .downlevel .appendix-bottom,
  .downlevel .posts-container {
  padding-left: 150px;
  padding-right: 150px;
  max-width: 900px;
}
}

.downlevel pre code {
  display: block;
  border-left: 2px solid rgba(0, 0, 0, .1);
  padding: 0 0 0 20px;
  font-size: 14px;
}

.downlevel code, .downlevel pre {
  color: black;
  background: none;
  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.5;

  -moz-tab-size: 4;
  -o-tab-size: 4;
  tab-size: 4;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

.downlevel .posts-list .post-preview {
  color: inherit;
}



</style>

<script type="application/javascript">

function is_downlevel_browser() {
  if (bowser.isUnsupportedBrowser({ msie: "12", msedge: "16"},
                                 window.navigator.userAgent)) {
    return true;
  } else {
    return window.load_distill_framework === undefined;
  }
}

// show body when load is complete
function on_load_complete() {

  // add anchors
  if (window.anchors) {
    window.anchors.options.placement = 'left';
    window.anchors.add('d-article > h2, d-article > h3, d-article > h4, d-article > h5');
  }


  // set body to visible
  document.body.style.visibility = 'visible';

  // force redraw for leaflet widgets
  if (window.HTMLWidgets) {
    var maps = window.HTMLWidgets.findAll(".leaflet");
    $.each(maps, function(i, el) {
      var map = this.getMap();
      map.invalidateSize();
      map.eachLayer(function(layer) {
        if (layer instanceof L.TileLayer)
          layer.redraw();
      });
    });
  }

  // trigger 'shown' so htmlwidgets resize
  $('d-article').trigger('shown');
}

function init_distill() {

  init_common();

  // create front matter
  var front_matter = $('<d-front-matter></d-front-matter>');
  $('#distill-front-matter').wrap(front_matter);

  // create d-title
  $('.d-title').changeElementType('d-title');

  // create d-byline
  var byline = $('<d-byline></d-byline>');
  $('.d-byline').replaceWith(byline);

  // create d-article
  var article = $('<d-article></d-article>');
  $('.d-article').wrap(article).children().unwrap();

  // move posts container into article
  $('.posts-container').appendTo($('d-article'));

  // create d-appendix
  $('.d-appendix').changeElementType('d-appendix');

  // flag indicating that we have appendix items
  var appendix = $('.appendix-bottom').children('h3').length > 0;

  // replace footnotes with <d-footnote>
  $('.footnote-ref').each(function(i, val) {
    appendix = true;
    var href = $(this).attr('href');
    var id = href.replace('#', '');
    var fn = $('#' + id);
    var fn_p = $('#' + id + '>p');
    fn_p.find('.footnote-back').remove();
    var text = fn_p.html();
    var dtfn = $('<d-footnote></d-footnote>');
    dtfn.html(text);
    $(this).replaceWith(dtfn);
  });
  // remove footnotes
  $('.footnotes').remove();

  // move refs into #references-listing
  $('#references-listing').replaceWith($('#refs'));

  $('h1.appendix, h2.appendix').each(function(i, val) {
    $(this).changeElementType('h3');
  });
  $('h3.appendix').each(function(i, val) {
    var id = $(this).attr('id');
    $('.d-contents a[href="#' + id + '"]').parent().remove();
    appendix = true;
    $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('d-appendix'));
  });

  // show d-appendix if we have appendix content
  $("d-appendix").css('display', appendix ? 'grid' : 'none');

  // localize layout chunks to just output
  $('.layout-chunk').each(function(i, val) {

    // capture layout
    var layout = $(this).attr('data-layout');

    // apply layout to markdown level block elements
    var elements = $(this).children().not('div.sourceCode, pre, script');
    elements.each(function(i, el) {
      var layout_div = $('<div class="' + layout + '"></div>');
      if (layout_div.hasClass('shaded')) {
        var shaded_content = $('<div class="shaded-content"></div>');
        $(this).wrap(shaded_content);
        $(this).parent().wrap(layout_div);
      } else {
        $(this).wrap(layout_div);
      }
    });


    // unwrap the layout-chunk div
    $(this).children().unwrap();
  });

  // remove code block used to force  highlighting css
  $('.distill-force-highlighting-css').parent().remove();

  // remove empty line numbers inserted by pandoc when using a
  // custom syntax highlighting theme
  $('code.sourceCode a:empty').remove();

  // load distill framework
  load_distill_framework();

  // wait for window.distillRunlevel == 4 to do post processing
  function distill_post_process() {

    if (!window.distillRunlevel || window.distillRunlevel < 4)
      return;

    // hide author/affiliations entirely if we have no authors
    var front_matter = JSON.parse($("#distill-front-matter").html());
    var have_authors = front_matter.authors && front_matter.authors.length > 0;
    if (!have_authors)
      $('d-byline').addClass('hidden');

    // article with toc class
    $('.d-contents').parent().addClass('d-article-with-toc');

    // strip links that point to #
    $('.authors-affiliations').find('a[href="#"]').removeAttr('href');

    // add orcid ids
    $('.authors-affiliations').find('.author').each(function(i, el) {
      var orcid_id = front_matter.authors[i].orcidID;
      if (orcid_id) {
        var a = $('<a></a>');
        a.attr('href', 'https://orcid.org/' + orcid_id);
        var img = $('<img></img>');
        img.addClass('orcid-id');
        img.attr('alt', 'ORCID ID');
        img.attr('src','data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg==');
        a.append(img);
        $(this).append(a);
      }
    });

    // hide elements of author/affiliations grid that have no value
    function hide_byline_column(caption) {
      $('d-byline').find('h3:contains("' + caption + '")').parent().css('visibility', 'hidden');
    }

    // affiliations
    var have_affiliations = false;
    for (var i = 0; i<front_matter.authors.length; ++i) {
      var author = front_matter.authors[i];
      if (author.affiliation !== "&nbsp;") {
        have_affiliations = true;
        break;
      }
    }
    if (!have_affiliations)
      $('d-byline').find('h3:contains("Affiliations")').css('visibility', 'hidden');

    // published date
    if (!front_matter.publishedDate)
      hide_byline_column("Published");

    // document object identifier
    var doi = $('d-byline').find('h3:contains("DOI")');
    var doi_p = doi.next().empty();
    if (!front_matter.doi) {
      // if we have a citation and valid citationText then link to that
      if ($('#citation').length > 0 && front_matter.citationText) {
        doi.html('Citation');
        $('<a href="#citation"></a>')
          .text(front_matter.citationText)
          .appendTo(doi_p);
      } else {
        hide_byline_column("DOI");
      }
    } else {
      $('<a></a>')
         .attr('href', "https://doi.org/" + front_matter.doi)
         .html(front_matter.doi)
         .appendTo(doi_p);
    }

     // change plural form of authors/affiliations
    if (front_matter.authors.length === 1) {
      var grid = $('.authors-affiliations');
      grid.children('h3:contains("Authors")').text('Author');
      grid.children('h3:contains("Affiliations")').text('Affiliation');
    }

    // remove d-appendix and d-footnote-list local styles
    $('d-appendix > style:first-child').remove();
    $('d-footnote-list > style:first-child').remove();

    // move appendix-bottom entries to the bottom
    $('.appendix-bottom').appendTo('d-appendix').children().unwrap();
    $('.appendix-bottom').remove();

    // clear polling timer
    clearInterval(tid);

    // show body now that everything is ready
    on_load_complete();
  }

  var tid = setInterval(distill_post_process, 50);
  distill_post_process();

}

function init_downlevel() {

  init_common();

   // insert hr after d-title
  $('.d-title').after($('<hr class="section-separator"/>'));

  // check if we have authors
  var front_matter = JSON.parse($("#distill-front-matter").html());
  var have_authors = front_matter.authors && front_matter.authors.length > 0;

  // manage byline/border
  if (!have_authors)
    $('.d-byline').remove();
  $('.d-byline').after($('<hr class="section-separator"/>'));
  $('.d-byline a').remove();

  // remove toc
  $('.d-contents').remove();

  // move appendix elements
  $('h1.appendix, h2.appendix').each(function(i, val) {
    $(this).changeElementType('h3');
  });
  $('h3.appendix').each(function(i, val) {
    $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('.d-appendix'));
  });


  // inject headers into references and footnotes
  var refs_header = $('<h3></h3>');
  refs_header.text('References');
  $('#refs').prepend(refs_header);

  var footnotes_header = $('<h3></h3');
  footnotes_header.text('Footnotes');
  $('.footnotes').children('hr').first().replaceWith(footnotes_header);

  // move appendix-bottom entries to the bottom
  $('.appendix-bottom').appendTo('.d-appendix').children().unwrap();
  $('.appendix-bottom').remove();

  // remove appendix if it's empty
  if ($('.d-appendix').children().length === 0)
    $('.d-appendix').remove();

  // prepend separator above appendix
  $('.d-appendix').before($('<hr class="section-separator" style="clear: both"/>'));

  // trim code
  $('pre>code').each(function(i, val) {
    $(this).html($.trim($(this).html()));
  });

  // move posts-container right before article
  $('.posts-container').insertBefore($('.d-article'));

  $('body').addClass('downlevel');

  on_load_complete();
}


function init_common() {

  // jquery plugin to change element types
  (function($) {
    $.fn.changeElementType = function(newType) {
      var attrs = {};

      $.each(this[0].attributes, function(idx, attr) {
        attrs[attr.nodeName] = attr.nodeValue;
      });

      this.replaceWith(function() {
        return $("<" + newType + "/>", attrs).append($(this).contents());
      });
    };
  })(jQuery);

  // prevent underline for linked images
  $('a > img').parent().css({'border-bottom' : 'none'});

  // mark non-body figures created by knitr chunks as 100% width
  $('.layout-chunk').each(function(i, val) {
    var figures = $(this).find('img, .html-widget');
    if ($(this).attr('data-layout') !== "l-body") {
      figures.css('width', '100%');
    } else {
      figures.css('max-width', '100%');
      figures.filter("[width]").each(function(i, val) {
        var fig = $(this);
        fig.css('width', fig.attr('width') + 'px');
      });

    }
  });

  // auto-append index.html to post-preview links in file: protocol
  // and in rstudio ide preview
  $('.post-preview').each(function(i, val) {
    if (window.location.protocol === "file:")
      $(this).attr('href', $(this).attr('href') + "index.html");
  });

  // get rid of index.html references in header
  if (window.location.protocol !== "file:") {
    $('.distill-site-header a[href]').each(function(i,val) {
      $(this).attr('href', $(this).attr('href').replace("index.html", "./"));
    });
  }

  // add class to pandoc style tables
  $('tr.header').parent('thead').parent('table').addClass('pandoc-table');
  $('.kable-table').children('table').addClass('pandoc-table');

  // add figcaption style to table captions
  $('caption').parent('table').addClass("figcaption");

  // initialize posts list
  if (window.init_posts_list)
    window.init_posts_list();

  // implmement disqus comment link
  $('.disqus-comment-count').click(function() {
    window.headroom_prevent_pin = true;
    $('#disqus_thread').toggleClass('hidden');
    if (!$('#disqus_thread').hasClass('hidden')) {
      var offset = $(this).offset();
      $(window).resize();
      $('html, body').animate({
        scrollTop: offset.top - 35
      });
    }
  });
}

document.addEventListener('DOMContentLoaded', function() {
  if (is_downlevel_browser())
    init_downlevel();
  else
    window.addEventListener('WebComponentsReady', init_distill);
});

</script>

<style type="text/css">
/* base variables */

/* Edit the CSS properties in this file to create a custom
   Distill theme. Only edit values in the right column
   for each row; values shown are the CSS defaults.
   To return any property to the default,
   you may set its value to: unset
   All rows must end with a semi-colon.                      */

/* Optional: embed custom fonts here with `@import`          */
/* This must remain at the top of this file.                 */



html {
  /*-- Main font sizes --*/
  --title-size:      50px;
  --body-size:       1.06rem;
  --code-size:       14px;
  --aside-size:      12px;
  --fig-cap-size:    13px;
  /*-- Main font colors --*/
  --title-color:     #000000;
  --header-color:    rgba(0, 0, 0, 0.8);
  --body-color:      rgba(0, 0, 0, 0.8);
  --aside-color:     rgba(0, 0, 0, 0.6);
  --fig-cap-color:   rgba(0, 0, 0, 0.6);
  /*-- Specify custom fonts ~~~ must be imported above   --*/
  --heading-font:    sans-serif;
  --mono-font:       monospace;
  --body-font:       sans-serif;
  --navbar-font:     sans-serif;  /* websites + blogs only */
}

/*-- ARTICLE METADATA --*/
d-byline {
  --heading-size:    0.6rem;
  --heading-color:   rgba(0, 0, 0, 0.5);
  --body-size:       0.8rem;
  --body-color:      rgba(0, 0, 0, 0.8);
}

/*-- ARTICLE TABLE OF CONTENTS --*/
.d-contents {
  --heading-size:    18px;
  --contents-size:   13px;
}

/*-- ARTICLE APPENDIX --*/
d-appendix {
  --heading-size:    15px;
  --heading-color:   rgba(0, 0, 0, 0.65);
  --text-size:       0.8em;
  --text-color:      rgba(0, 0, 0, 0.5);
}

/*-- WEBSITE HEADER + FOOTER --*/
/* These properties only apply to Distill sites and blogs  */

.distill-site-header {
  --title-size:       18px;
  --text-color:       rgba(255, 255, 255, 0.8);
  --text-size:        15px;
  --hover-color:      white;
  --bkgd-color:       #0F2E3D;
}

.distill-site-footer {
  --text-color:       rgba(255, 255, 255, 0.8);
  --text-size:        15px;
  --hover-color:      white;
  --bkgd-color:       #0F2E3D;
}

/*-- Additional custom styles --*/
/* Add any additional CSS rules below                      */
</style>
<style type="text/css">
/* base variables */

/* Edit the CSS properties in this file to create a custom
   Distill theme. Only edit values in the right column
   for each row; values shown are the CSS defaults.
   To return any property to the default,
   you may set its value to: unset
   All rows must end with a semi-colon.                      */

/* Optional: embed custom fonts here with `@import`          */
/* This must remain at the top of this file.                 */

@import url(https://fonts.googleapis.com/css?family=Fira+Sans&display=swap);
@import url(https://fonts.googleapis.com/css?family=Roboto&display=swap);
@import url(https://fonts.googleapis.com/css?family=Fira+Mono&display=swap);


html {
  /*-- Main font sizes --*/
  --title-size:      50px;
  --body-size:       1.06rem;
  --code-size:       14px;
  --aside-size:      12px;
  --fig-cap-size:    13px;
  /*-- Main font colors --*/
  --title-color:     #000000;
  --header-color:    rgba(0, 0, 0, 0.8);
  --body-color:      rgba(0, 0, 0, 0.8);
  --aside-color:     rgba(0, 0, 0, 0.6);
  --fig-cap-color:   rgba(0, 0, 0, 0.6);
  /*-- Specify custom fonts ~~~ must be imported above   --*/
  --heading-font:    'Roboto', sans-serif;
  --mono-font:       'Fira Mono', monospace;
  --body-font:       'Fira Sans', sans-serif;
}

/*-- ARTICLE METADATA --*/
.d-byline {
  --heading-size:    0.6rem;
  --heading-color:   rgba(0, 0, 0, 0.5);
  --body-size:       0.8rem;
  --body-color:      rgba(0, 0, 0, 0.8);
}

/*-- ARTICLE TABLE OF CONTENTS --*/
.d-contents {
  --heading-size:    18px;
  --contents-size:   13px;
}

/*-- ARTICLE APPENDIX --*/
d-appendix {
  --heading-size:    15px;
  --heading-color:   rgba(0, 0, 0, 0.65);
  --text-size:       0.8em;
  --text-color:      rgba(0, 0, 0, 0.5);
}

/*-- WEBSITE HEADER + FOOTER --*/
/* These properties only apply to Distill sites and blogs  */

.distill-site-header {
  --title-size:       18px;
  --text-color:       rgba(255, 255, 255, 0.8);
  --text-size:        15px;
  --hover-color:      white;
  --bkgd-color:       #3465a4;
}

.distill-site-footer {
  --text-color:       rgba(255, 255, 255, 0.8);
  --text-size:        15px;
  --hover-color:      white;
  --bkgd-color:       #002ab5;
}

/*-- code wrap
pre code {
  white-space: pre-wrap;
}
--*/</style>
<style type="text/css">
/* base style */

/* FONT FAMILIES */

:root {
  --heading-default: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
  --mono-default: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  --body-default: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
}

body,
.posts-list .post-preview p,
.posts-list .description p {
  font-family: var(--body-font), var(--body-default);
}

h1, h2, h3, h4, h5, h6,
.posts-list .post-preview h2,
.posts-list .description h2 {
  font-family: var(--heading-font), var(--heading-default);
}

d-article div.sourceCode code,
d-article pre code {
	font-family: var(--mono-font), var(--mono-default);
}


/*-- TITLE --*/
d-title h1,
.posts-list > h1 {
  color: var(--title-color, black);
}

d-title h1 {
  font-size: var(--title-size, 50px);
}

/*-- HEADERS --*/
d-article h1,
d-article h2,
d-article h3,
d-article h4,
d-article h5,
d-article h6 {
  color: var(--header-color, rgba(0, 0, 0, 0.8));
}

/*-- BODY --*/
/* only text inside of <p> tags */
d-article > p {
  color: var(--body-color, rgba(0, 0, 0, 0.8));
  font-size: var(--body-size, 1.06rem);
}

/*-- CODE --*/
d-article div.sourceCode code,
d-article pre code {
	font-size: var(--code-size, 14px);
}

/*-- ASIDE --*/
d-article aside {
	font-size: var(--aside-size, 12px);
	color: var(--aside-color, rgba(0, 0, 0, 0.6));
}

/*-- FIGURE CAPTIONS --*/
figure .caption,
figure figcaption,
.figure .caption {
	font-size: var(--fig-cap-size, 13px);
	color: var(--fig-cap-color, rgba(0, 0, 0, 0.6));
}

/*-- METADATA --*/
d-byline h3 {
	font-size: var(--heading-size, 0.6rem);
	color: var(--heading-color, rgba(0, 0, 0, 0.5));
}

d-byline {
	font-size: var(--body-size, 0.8rem);
	color: var(--body-color, rgba(0, 0, 0, 0.8));
}

d-byline a,
d-article d-byline a {
	color: var(--body-color, rgba(0, 0, 0, 0.8));
}

/*-- TABLE OF CONTENTS --*/
.d-contents nav h3 {
	font-size: var(--heading-size, 18px);
}

.d-contents nav a {
	font-size: var(--contents-size, 13px);
}

/*-- APPENDIX --*/
d-appendix h3 {
  font-size: var(--heading-size, 15px);
	color: var(--heading-color, rgba(0, 0, 0, 0.65));
}

d-appendix {
  font-size: var(--text-size, 0.8em);
	color: var(--text-color, rgba(0, 0, 0, 0.5));
}

d-appendix d-footnote-list a.footnote-backlink {
	color: var(--text-color, rgba(0, 0, 0, 0.5));
}

/*-- WEBSITE HEADER + FOOTER --*/
.distill-site-header .title {
	font-size: var(--title-size, 18px);
	font-family: var(--navbar-font), var(--heading-default);
}

.distill-site-header a,
.nav-dropdown .nav-dropbtn {
  font-family: var(--navbar-font), var(--heading-default);
}

.distill-site-header a:hover {
	color: var(--hover-color, white);
}

.distill-site-header {
	font-size: var(--text-size, 15px);
	color: var(--text-color, rgba(255, 255, 255, 0.8));
	background-color: var(--bkgd-color, #0F2E3D);
}

.distill-site-footer {
	font-size: var(--text-size, 15px);
	color: var(--text-color, rgba(255, 255, 255, 0.8));
	background-color: var(--bkgd-color, #0F2E3D);
}

.distill-site-footer a:hover {
	color: var(--hover-color, white);
}</style>
<!--/radix_placeholder_distill-->
  <script src="../../site_libs/header-attrs-2.5.3/header-attrs.js"></script>
  <script src="../../site_libs/jquery-1.11.3/jquery.min.js"></script>
  <script src="../../site_libs/anchor-4.2.2/anchor.min.js"></script>
  <script src="../../site_libs/bowser-1.9.3/bowser.min.js"></script>
  <script src="../../site_libs/webcomponents-2.0.0/webcomponents.js"></script>
  <script src="../../site_libs/distill-2.2.21/template.v2.js"></script>
  <!--radix_placeholder_site_in_header-->
<!--/radix_placeholder_site_in_header-->


</head>

<body>

<!--radix_placeholder_front_matter-->

<script id="distill-front-matter" type="text/json">
{"title":"Lecture 2","description":"... in which we explore the typical data analysis workflow\nwith the tidyverse, wrangle different kinds of data and\nlearn about factors.","authors":[{"author":"Jannik Buhr","authorURL":"https://jmbuhr.de","affiliation":"&nbsp;","affiliationURL":"#","orcidID":""}],"publishedDate":"2020-11-07T00:00:00.000+01:00","citationText":"Buhr, 2020"}
</script>

<!--/radix_placeholder_front_matter-->
<!--radix_placeholder_navigation_before_body-->
<header class="header header--fixed" role="banner">
<nav class="distill-site-nav distill-site-header">
<div class="nav-left">
<a class="logo" href="https://jmbuhr.de/dataIntro20/">
<img src="../../images/hex.png" alt="Logo"/>
</a>
<a href="../../index.html" class="title">Introduction to Data Analysis with R</a>
<input id="distill-search" class="nav-search hidden" type="text" placeholder="Search..."/>
</div>
<div class="nav-right">
<a href="../../index.html">Lectures</a>
<a href="../../about.html">About</a>
<a href="https://github.com/jmbuhr/dataIntro20" aria-label="Link to source">
<i class="fab fa-github" aria-hidden="true"></i>
</a>
<a href="javascript:void(0);" class="nav-toggle">&#9776;</a>
</div>
</nav>
</header>
<!--/radix_placeholder_navigation_before_body-->
<!--radix_placeholder_site_before_body-->
<!--/radix_placeholder_site_before_body-->

<div class="d-title">
<h1>Lecture 2</h1>
<!--radix_placeholder_categories-->
<!--/radix_placeholder_categories-->
<p><p>… in which we explore the typical data analysis workflow with the tidyverse, wrangle different kinds of data and learn about factors.</p></p>
</div>

<div class="d-byline">
  Jannik Buhr <a href="https://jmbuhr.de" class="uri">https://jmbuhr.de</a> 
  
<br/>11-07-2020
</div>

<div class="d-article">
<div class="d-contents d-contents-float">
<nav class="l-text toc figcaption" id="TOC">
<h3>Contents</h3>
<ul>
<li><a href="#video">Video</a></li>
<li><a href="#slides">Slides</a></li>
<li><a href="#script">Script</a>
<ul>
<li><a href="#making-ourselves-at-home-in-rstudio">Making Ourselves at Home in RStudio</a>
<ul>
<li><a href="#important-settings">Important Settings</a></li>
<li><a href="#a-project-based-workflow">A Project-based Workflow</a></li>
<li><a href="#working-in-style">Working in Style</a></li>
</ul></li>
<li><a href="#a-data-analysis-workflow">A Data Analysis Workflow</a></li>
<li><a href="#reading-data-with-readr">Reading Data with <code>readr</code></a>
<ul>
<li><a href="#common-hurdles-when-importing-data">Common Hurdles when Importing Data</a></li>
</ul></li>
<li><a href="#wrangling-data-with-dplyr">Wrangling Data with <code>dplyr</code></a>
<ul>
<li><a href="#select">select</a></li>
<li><a href="#filter">filter</a></li>
<li><a href="#mutate">mutate</a></li>
<li><a href="#interlude-begind-the-magic-handling-data-with-base-r">Interlude: Begind the magic, handling data with base-R</a></li>
<li><a href="#the-pipe">The pipe <code>%&gt;%</code></a></li>
<li><a href="#arrange">arrange</a></li>
<li><a href="#summarise">summarise</a></li>
<li><a href="#group_by">group_by</a></li>
</ul></li>
<li><a href="#visualization-and-our-first-encounter-with-factors">Visualization and our First Encounter with <code>factor</code>s</a></li>
</ul></li>
<li><a href="#exercises">Exercises</a></li>
<li><a href="#resources">Resources</a>
<ul>
<li><a href="#package-documentation">Package Documentation</a></li>
<li><a href="#getting-help">Getting Help</a></li>
</ul></li>
</ul>
</nav>
</div>
<h1 id="video">Video</h1>
<iframe height="400" src="https://www.youtube.com/embed/yo6uQYr8U48" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen>
</iframe>
<h1 id="slides">Slides</h1>
<div class="layout-chunk" data-layout="l-body">
<iframe src="slides2.html" width="624" height="400px">
</iframe>
</div>
<h1 id="script">Script</h1>
<blockquote>
<p><strong>Note</strong>:<br />
I try to be vocal about what the code does in plain English while I type it and learning the “translations” of symbols and keywords can help you, too. After a while, programming can feel a lot more like having a conversation with your digital assistant or a helpful friend. The boundary between human languages and computer languages is more blurry than you might think.</p>
</blockquote>
<p>Before we get deeper into R, let’s talk a little bit about our Home when working with R: RStudio.</p>
<h2 id="making-ourselves-at-home-in-rstudio">Making Ourselves at Home in RStudio</h2>
<h3 id="important-settings">Important Settings</h3>
<p>I highlighted 3 settings that I consider important to change from their default values. The first two might seem odd at first glance.</p>
<div class="layout-chunk" data-layout="l-body">
<p><img src="img/RS_settings.png" width="50%" /><img src="img/RS_settings2.png" width="50%" /></p>
</div>
<p>The workspace that RStudio would save as <code>.RData</code> contains all objects created in a session, which is, what we can see in the <strong>Environment</strong> pane (by default in the top right panel, bottom right in my setup). Why would we not want to load the objects we created in the last session into our current session automatically? The reason is reproducibility. We want to make sure that everything our analysis needs is in the script. It creates our variables and plots from the raw data and should be the sole source of truth. Given the raw data and the script, everyone should be able to reproduce our results. The third setting (text encoding) is also concerned with collaboration. It makes sure that our text files and special characters in them (like German umlauts) look the same on different operating systems like Windows, iOS and Linux.</p>
<h3 id="a-project-based-workflow">A Project-based Workflow</h3>
<p>Last week we simply went ahead and created a script file and an Rmarkdown file in some folder on our computer. But how does R known, where the script is? How does it know, where to look, when we tell it to read in a file or save a plot? The main folder where R starts is called the <strong>working directory</strong>. To find out, what our current working directory is, we execute the function <code>getwd()</code> for get working directory:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='fu'><a href='https://rdrr.io/r/base/getwd.html'>getwd</a></span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] &quot;/home/jannik/Documents/projects/teaching/dataIntro20/_lectures/lecture2&quot;</code></pre>
</div>
<p>This will look slightly different depending on you operating system. The next function I want you to know, but <strong>never use</strong>:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='fu'><a href='https://rdrr.io/r/base/getwd.html'>setwd</a></span><span class='op'>(</span><span class='st'>"some/file/path"</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>“Why should I not use it?” you might ask. Let’s assume I use the function to set the working directory as seen above:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='fu'><a href='https://rdrr.io/r/base/getwd.html'>setwd</a></span><span class='op'>(</span><span class='st'>"/home/jannik/Documents/projects/teaching/dataIntro20/_lectures/lecture2"</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>Now, when I give the file to you to test my analysis, chances are very low that it would work. Because you are likely not called Jannik and even more likely don’t have the same folder structure that I had.</p>
<p>So what we want instead of these <em>absolute file paths</em>, is a <strong>relative file paths</strong> that start in the folder that our scripts are in. This is what <strong>RStudio Projects</strong> are for. It is basically just a folder with a special file that ends in <code>.Rproj</code>, but as soon as R finds this file in the folder, the working directory will automatically be this folder. So when you share this folder, it will still just work.</p>
<p>Go ahead and use the blue R button in the top right corner to create a <strong>New Project</strong>. I recommend you do this either as one project for the whole course or with one project per week. Projects are also convenient because they save what files you had open and so forth.</p>
<p>There is one thing I didn’t tell you about Rmarkdown documents, yet. Their working directory is always the folder they are in, even if they are in some subdirectory of a project. In a way this also means that you don’t necessarily need a project to work with Rmarkdown, but having one anyway makes it easier to keep track of your files and have a consistent structure.</p>
<h3 id="working-in-style">Working in Style</h3>
<p>Now that we have a cosy project for today, let’s also make sure we are working in style and are feeling right at home in RStudio. <a href="https://www.pipinghotdata.com/posts/2020-09-07-introducing-the-rstudio-ide-and-r-markdown/">This blogpost</a> provides excellent gifs for the different settings in RStudio and even for Rmarkdown troubleshooting. I am also fond of the <a href="https://github.com/gadenbuie/rsthemes">rsthemes package</a> for additional appearances.</p>
<h2 id="a-data-analysis-workflow">A Data Analysis Workflow</h2>
<p>We are getting close to importing our very first dataset from a file into R. Generally, this is the first thing that needs to happen with any data analysis and we will cover it today. The data I provided is already pretty tidy so we will start with that and build some visualizations. The communicate-part is also covered, because we are working in Rmarkdown after all, which is designed to communicate our findings. Later, we will also have a look at some less tidy data, but not before having defined what “tidy data” is.</p>

<div class="layout-chunk" data-layout="l-body">
<div class="figure"><span id="fig:workflow"></span>
<img src="img/workflow-wickham.png" alt="Figure from Wickham and Grolemund (2017)." width="100%" class=external />
<p class="caption">
Figure 1: Figure from <span class="citation" data-cites="wickhamDataScienceImport2017"><a href="#ref-wickhamDataScienceImport2017" role="doc-biblioref">Wickham and Grolemund</a> (<a href="#ref-wickhamDataScienceImport2017" role="doc-biblioref">2017</a>)</span>.
</p>
</div>
</div>
<h2 id="reading-data-with-readr">Reading Data with <code>readr</code></h2>
<aside>
<p><a href="https://readr.tidyverse.org/"></p>
<div class="layout-chunk" data-layout="l-body">
<p><img src="img/readr.png" width="120" class=external /></p>
</div>
<p></a></p>
</aside>
<p>The package responsible for loading data in the tidyverse is called <code>readr</code>, so we start by loading the whole tidyverse.</p>
<p>Note, that in general, we could also load just the <code>readr</code> package with <code>library(readr)</code>, but we need the rest of the tidyverse later on anyways. There is also the option to not load a package at all but rather only use one function from a package by prefixing the function with the package name and two colons (<code>::</code>) Like so: <code>readr::read_csv("...")</code>.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='http://tidyverse.tidyverse.org'>tidyverse</a></span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>Without further ado, let’s download the data for today. In fact, there are multiple ways to go about this. We could download the whole course folder from GitHub by following the link in the top right corner of this website and then using the download button:</p>
<div class="layout-chunk" data-layout="l-body">
<p><img src="img/download_repo.png" width="182" /></p>
</div>
<p>You will then find the data in the folder <code>./_lectures/lecture2/data/</code>.</p>
<p>Or we can navigate to the file on GitHub. Follow this link: <a href="https://github.com/jmbuhr/dataIntro20/tree/master/_lectures/lecture2/data">files</a>, click on one of the files and then click on <strong>raw</strong>:</p>
<div class="layout-chunk" data-layout="l-body">
<p><img src="img/github-raw.png" width="120" /></p>
</div>
<p>From there you can copy the link displayed in your browser address field and download the file straight from R:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='fu'><a href='https://rdrr.io/r/utils/download.file.html'>download.file</a></span><span class='op'>(</span><span class='st'>"https://raw.githubusercontent.com/jmbuhr/dataIntro20/master/_lectures/lecture2/data/gapminder.csv"</span>,
              <span class='st'>"data/gapminder.csv"</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>The folder to download your data to (<code>./data</code>) must be created in advance. This is an example for a relative path (an absolute path would start with <code>/</code> or a drive letter like <code>C:</code>).</p>
<p>Now we can finally load in the data and store it in a variable. When working with file paths, RStudio’s autocompletion is especially helpful. We can trigger it with <strong>Tab</strong> or <strong>Ctrl+Space</strong>.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>gapminder</span> <span class='op'>&lt;-</span> <span class='fu'>read_csv</span><span class='op'>(</span><span class='st'>"data/gapminder.csv"</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p><code>readr</code> will also tell you the datatypes it guessed for the columns. Let’s inspect our dataset:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>gapminder</span>
</code></pre>
</div>
<pre><code># A tibble: 1,704 x 6
   country     continent  year lifeExp      pop gdpPercap
   &lt;chr&gt;       &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;
 1 Afghanistan Asia       1952    28.8  8425333      779.
 2 Afghanistan Asia       1957    30.3  9240934      821.
 3 Afghanistan Asia       1962    32.0 10267083      853.
 4 Afghanistan Asia       1967    34.0 11537966      836.
 5 Afghanistan Asia       1972    36.1 13079460      740.
 6 Afghanistan Asia       1977    38.4 14880372      786.
 7 Afghanistan Asia       1982    39.9 12881816      978.
 8 Afghanistan Asia       1987    40.8 13867957      852.
 9 Afghanistan Asia       1992    41.7 16317921      649.
10 Afghanistan Asia       1997    41.8 22227415      635.
# … with 1,694 more rows</code></pre>
</div>
<p>The gapminder dataset <span class="citation" data-cites="bryanGapminderDataGapminder2017">(<a href="#ref-bryanGapminderDataGapminder2017" role="doc-biblioref">Bryan 2017</a>)</span> is an excerpt from the <a href="https://www.gapminder.org/">gapminder project</a> and contains the life expectancy at birth for 142 countries at 5 year intervals between 1952 and 2007. It also contains the population and the Gross Domestic Product (GDP) per Inhabitant. We will built a visualization later on.</p>
<p><code>read_csv</code> can even read data from a url straight away, without the need for us to download the file ourselves, but we usually want a copy of the data locally. For the curious run this:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='fu'>read_csv</span><span class='op'>(</span><span class='st'>"https://raw.githubusercontent.com/jmbuhr/dataIntro20/master/_lectures/lecture2/data/gapminder.csv"</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>So, this all went smoothly. But this will not always be the case. We will now look at common hurdles when importing data</p>
<h3 id="common-hurdles-when-importing-data">Common Hurdles when Importing Data</h3>
<p>The function we just used was called <code>read_csv</code>, because it reads a file format that consists of <strong>comma separated values</strong>. Look at the raw file in a text editor (not word) like notepad or RStudio to see why. But the file extension <code>.csv</code> can sometimes be lying…</p>
<p>Because in German, the comma is used to separate decimal numbers (vs. the dot in English), a lot of Software will output a different type of csv-file when configured in German. It will still call it csv, but actually it is separated by semicolons! We have a special function for this:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='fu'>read_csv2</span><span class='op'>(</span><span class='st'>"data/gapminder_csv2.csv"</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>When looking through the autocompletion options that pop up when you are typing the function name, you might have noticed a similar function <code>read.csv</code> and <code>read.csv2</code>. These are the functions that come with R, without any packages like the tidyverse. You can of course use those as well, but the tidyverse functions provide a more consistent experience and have less surprising quirks. I am teaching the tidyverse first, because it allows you to do more while having to learn less edge cases.</p>
<p>If we look at yet another file <code>data/gapminder_tsv.txt</code>, we notice that the file extension doesn’t tell us much about the format, only that it is text (as opposed to a binary format only computers can read). If we look into the file:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='fu'>read_lines</span><span class='op'>(</span><span class='st'>"data/gapminder_tsv.txt"</span>, n_max <span class='op'>=</span> <span class='fl'>3</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] &quot;country\tcontinent\tyear\tlifeExp\tpop\tgdpPercap&quot;    
[2] &quot;Afghanistan\tAsia\t1952\t28.801\t8425333\t779.4453145&quot;
[3] &quot;Afghanistan\tAsia\t1957\t30.332\t9240934\t820.8530296&quot;</code></pre>
</div>
<p>We notice that the values are separated by ", a special sequence that stands for the tab character. The <code>read_tsv</code> function will do the job.</p>
<p>If the separator (also called delimiter) is even more obscure, we can use the general function <code>read_delim</code>. Say a co-worker misunderstood us and thought tsv stands for “Tilde separated values,” we can still read his file.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='fu'>read_lines</span><span class='op'>(</span><span class='st'>"data/obscure_file.tsv"</span>, n_max <span class='op'>=</span> <span class='fl'>3</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] &quot;country~continent~year~lifeExp~pop~gdpPercap&quot;    
[2] &quot;Afghanistan~Asia~1952~28.801~8425333~779.4453145&quot;
[3] &quot;Afghanistan~Asia~1957~30.332~9240934~820.8530296&quot;</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='fu'>read_delim</span><span class='op'>(</span><span class='st'>"data/obscure_file.tsv"</span>, delim <span class='op'>=</span> <span class='st'>"~"</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>There are more ways in which raw data can be messy or hard to read depending on the machine but I can’t show all of them. One common thing you will encounter though is measurement machines writing some additional information in the first couple of lines before the actual data (like the time of the measurement). In this example:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='fu'>read_lines</span><span class='op'>(</span><span class='st'>"data/gapminder_messier.csv"</span>, n_max <span class='op'>=</span> <span class='fl'>4</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] &quot;# Some comment about the data&quot;                   
[2] &quot;And maybe a personal note&quot;                       
[3] &quot;country,continent,year,lifeExp,pop,gdpPercap&quot;    
[4] &quot;Afghanistan,Asia,1952,28.801,8425333,779.4453145&quot;</code></pre>
</div>
<p>The first 2 lines are not part of the data. Reading the file normally as a csv would produce something weird: Because the first line does not contain any commata, it will assume that the file contains only one column and also report a bunch of <strong>parsing failures</strong>. Parsing is the act of turning data represented as raw text into a useful format, like a table of numbers.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='fu'>read_csv</span><span class='op'>(</span><span class='st'>"data/gapminder_messier.csv"</span>, n_max <span class='op'>=</span> <span class='fl'>3</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 3 x 1
  `# Some comment about the data`
  &lt;chr&gt;                          
1 And maybe a personal note      
2 country                        
3 Afghanistan                    </code></pre>
</div>
<p>We can fix this by telling R to skip the first 2 lines entirely:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='fu'>read_csv</span><span class='op'>(</span><span class='st'>"data/gapminder_messier.csv"</span>, skip <span class='op'>=</span> <span class='fl'>2</span>, n_max <span class='op'>=</span> <span class='fl'>3</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 3 x 6
  country     continent  year lifeExp      pop gdpPercap
  &lt;chr&gt;       &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;
1 Afghanistan Asia       1952    28.8  8425333      779.
2 Afghanistan Asia       1957    30.3  9240934      821.
3 Afghanistan Asia       1962    32.0 10267083      853.</code></pre>
</div>
<p>I was using the <code>n_max</code> argument of the functions above to save space in this lecture script.</p>
<p>In the video I forgot to mention that I also included an excel file to practice. We can read it using a function from the <code>readxl</code> package. This package is automatically installed with the tidyverse, but it is not loaded along with the other packages via <code>library(tidyverse)</code>. We can either load it with <code>library(readxl)</code> or refer to a single function from the package without loading the whole thing using double colons (<code>::</code>):</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='fu'>readxl</span><span class='fu'>::</span><span class='fu'><a href='https://readxl.tidyverse.org/reference/read_excel.html'>read_xlsx</a></span><span class='op'>(</span><span class='st'>"./data/gapminder.xlsx"</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>Now, that we learned about some of the ways in which raw data can be structured, let us go back to the original data that we read in and saved in the variable <code>gapminder</code>.</p>
<div class="layout-chunk" data-layout="l-body">
<table>
<thead>
<tr class="header">
<th style="text-align: left;">country</th>
<th style="text-align: left;">continent</th>
<th style="text-align: right;">year</th>
<th style="text-align: right;">lifeExp</th>
<th style="text-align: right;">pop</th>
<th style="text-align: right;">gdpPercap</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Afghanistan</td>
<td style="text-align: left;">Asia</td>
<td style="text-align: right;">1952</td>
<td style="text-align: right;">28.801</td>
<td style="text-align: right;">8425333</td>
<td style="text-align: right;">779.4453</td>
</tr>
<tr class="even">
<td style="text-align: left;">Afghanistan</td>
<td style="text-align: left;">Asia</td>
<td style="text-align: right;">1957</td>
<td style="text-align: right;">30.332</td>
<td style="text-align: right;">9240934</td>
<td style="text-align: right;">820.8530</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Afghanistan</td>
<td style="text-align: left;">Asia</td>
<td style="text-align: right;">1962</td>
<td style="text-align: right;">31.997</td>
<td style="text-align: right;">10267083</td>
<td style="text-align: right;">853.1007</td>
</tr>
<tr class="even">
<td style="text-align: left;">Afghanistan</td>
<td style="text-align: left;">Asia</td>
<td style="text-align: right;">1967</td>
<td style="text-align: right;">34.020</td>
<td style="text-align: right;">11537966</td>
<td style="text-align: right;">836.1971</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Afghanistan</td>
<td style="text-align: left;">Asia</td>
<td style="text-align: right;">1972</td>
<td style="text-align: right;">36.088</td>
<td style="text-align: right;">13079460</td>
<td style="text-align: right;">739.9811</td>
</tr>
<tr class="even">
<td style="text-align: left;">Afghanistan</td>
<td style="text-align: left;">Asia</td>
<td style="text-align: right;">1977</td>
<td style="text-align: right;">38.438</td>
<td style="text-align: right;">14880372</td>
<td style="text-align: right;">786.1134</td>
</tr>
</tbody>
</table>
</div>
<h2 id="wrangling-data-with-dplyr">Wrangling Data with <code>dplyr</code></h2>
<aside>
<p><a href="https://dplyr.tidyverse.org/"></p>
<div class="layout-chunk" data-layout="l-body">
<p><img src="img/dplyr.png" width="120" class=external /></p>
</div>
<p></a></p>
</aside>
<p>There a are a number of ways in which we can manipulate data. Of course I mean manipulate in it’s original sense, not the malicious one. This is sometimes referred to as <strong>data wrangling</strong> and within the tidyverse, this is a job for the <code>dplyr</code> package (short for data plyer, the tool you see in the logo).</p>
<p>dplyr provides functions for various operations on our data. Theses functions are sometimes also called <strong>dplyr verbs</strong>. All of them take a <code>tibble</code> or <code>data.frame</code> as input (plus additional parameters) and always return a <code>tibble</code>.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="figure"><span id="fig:dplyr-cute"></span>
<img src="img/dplyr_wrangling.png" alt="[@ArtworkAllisonHorst]" width="956" class=external />
<p class="caption">
Figure 2: <span class="citation" data-cites="ArtworkAllisonHorst">(<a href="#ref-ArtworkAllisonHorst" role="doc-biblioref"><span>“Artwork by @allison_horst”</span> 2020</a>)</span>
</p>
</div>
</div>
<h3 id="select">select</h3>
<p>The first verb we introduce is used to select columns. And hence, it is called <code>select</code>. The first argument is always the data, followed by an arbitrary number of column names. We can recognize functions the take an arbitrary number of additional arguments by the <code>...</code> in the autocompletion and help page.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='fu'>select</span><span class='op'>(</span><span class='va'>gapminder</span>, <span class='va'>country</span>, <span class='va'>year</span>, <span class='va'>pop</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 1,704 x 3
   country      year      pop
   &lt;chr&gt;       &lt;dbl&gt;    &lt;dbl&gt;
 1 Afghanistan  1952  8425333
 2 Afghanistan  1957  9240934
 3 Afghanistan  1962 10267083
 4 Afghanistan  1967 11537966
 5 Afghanistan  1972 13079460
 6 Afghanistan  1977 14880372
 7 Afghanistan  1982 12881816
 8 Afghanistan  1987 13867957
 9 Afghanistan  1992 16317921
10 Afghanistan  1997 22227415
# … with 1,694 more rows</code></pre>
</div>
<p>It might be confusing why we don’t need quotation marks around the column names like we do when we select and element from a vector by name as in:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span>first <span class='op'>=</span> <span class='fl'>1</span>, second <span class='op'>=</span> <span class='fl'>2</span><span class='op'>)</span><span class='op'>[</span><span class='st'>"first"</span><span class='op'>]</span>
</code></pre>
</div>
<pre><code>first 
    1 </code></pre>
</div>
<p>This concept is known as quasiquotation or data masking. It is quite unique to R, but it allows functions to known about the content of the data that is passed to them and use this as the environment in which they do their computations and search for variable names. So while the variable <code>country</code> doesn’t exist in the global environment, it does exist as a column of the gapminder tibble. <code>dplyr</code> functions always look in the data first when they search for names.</p>
<p>The help page for <code>select</code> tells us more about the different ways in which we can select columns. Here are a couple of examples without the output, rum them in your R session to confirm that they do what you think they do. (but do have a look at the help pages yourselves, they are quite well written).</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='fu'>select</span><span class='op'>(</span><span class='va'>gapminder</span>, <span class='fu'>where</span><span class='op'>(</span><span class='va'>is.numeric</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'>select</span><span class='op'>(</span><span class='va'>gapminder</span>, <span class='va'>country</span><span class='op'>:</span><span class='va'>lifeExp</span><span class='op'>)</span>
<span class='fu'>select</span><span class='op'>(</span><span class='va'>gapminder</span>, <span class='fu'>starts_with</span><span class='op'>(</span><span class='st'>"c"</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'>select</span><span class='op'>(</span><span class='va'>gapminder</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fl'>3</span>, <span class='fl'>4</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h3 id="filter">filter</h3>
<div class="layout-chunk" data-layout="l-body">
<div class="figure"><span id="fig:dplyr-filter"></span>
<img src="img/dplyr_filter.jpg" alt="[@ArtworkAllisonHorst]" class=external />
<p class="caption">
Figure 3: <span class="citation" data-cites="ArtworkAllisonHorst">(<a href="#ref-ArtworkAllisonHorst" role="doc-biblioref"><span>“Artwork by @allison_horst”</span> 2020</a>)</span>
</p>
</div>
</div>
<p>After selecting columns it is only natural to ask how to select rows. This is achieved with the function <code>filter</code>. For example, we can <strong>filter for</strong> all years smaller than 2000:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='fu'><a href='https://rdrr.io/r/stats/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>gapminder</span>, <span class='va'>year</span> <span class='op'>&lt;</span> <span class='fl'>2000</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 1,420 x 6
   country     continent  year lifeExp      pop gdpPercap
   &lt;chr&gt;       &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;
 1 Afghanistan Asia       1952    28.8  8425333      779.
 2 Afghanistan Asia       1957    30.3  9240934      821.
 3 Afghanistan Asia       1962    32.0 10267083      853.
 4 Afghanistan Asia       1967    34.0 11537966      836.
 5 Afghanistan Asia       1972    36.1 13079460      740.
 6 Afghanistan Asia       1977    38.4 14880372      786.
 7 Afghanistan Asia       1982    39.9 12881816      978.
 8 Afghanistan Asia       1987    40.8 13867957      852.
 9 Afghanistan Asia       1992    41.7 16317921      649.
10 Afghanistan Asia       1997    41.8 22227415      635.
# … with 1,410 more rows</code></pre>
</div>
<p>Or all the rows where the country is “New Zealand”:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='fu'><a href='https://rdrr.io/r/stats/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>gapminder</span>, <span class='va'>country</span> <span class='op'>==</span> <span class='st'>"New Zealand"</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 12 x 6
   country     continent  year lifeExp     pop gdpPercap
   &lt;chr&gt;       &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;     &lt;dbl&gt;
 1 New Zealand Oceania    1952    69.4 1994794    10557.
 2 New Zealand Oceania    1957    70.3 2229407    12247.
 3 New Zealand Oceania    1962    71.2 2488550    13176.
 4 New Zealand Oceania    1967    71.5 2728150    14464.
 5 New Zealand Oceania    1972    71.9 2929100    16046.
 6 New Zealand Oceania    1977    72.2 3164900    16234.
 7 New Zealand Oceania    1982    73.8 3210650    17632.
 8 New Zealand Oceania    1987    74.3 3317166    19007.
 9 New Zealand Oceania    1992    76.3 3437674    18363.
10 New Zealand Oceania    1997    77.6 3676187    21050.
11 New Zealand Oceania    2002    79.1 3908037    23190.
12 New Zealand Oceania    2007    80.2 4115771    25185.</code></pre>
</div>
<h3 id="mutate">mutate</h3>
<p>We are back at manipulating columns, this time by creating new ones or changing old ones. The <code>dplyr</code> verb that does that is called <code>muate</code>. For example, we might want to calculate the total GDP from the GDP per Capita and the population:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='fu'>mutate</span><span class='op'>(</span><span class='va'>gapminder</span>, gdp <span class='op'>=</span> <span class='va'>pop</span> <span class='op'>*</span> <span class='va'>gdpPercap</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 1,704 x 7
   country     continent  year lifeExp      pop gdpPercap          gdp
   &lt;chr&gt;       &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;        &lt;dbl&gt;
 1 Afghanistan Asia       1952    28.8  8425333      779.  6567086330.
 2 Afghanistan Asia       1957    30.3  9240934      821.  7585448670.
 3 Afghanistan Asia       1962    32.0 10267083      853.  8758855797.
 4 Afghanistan Asia       1967    34.0 11537966      836.  9648014150.
 5 Afghanistan Asia       1972    36.1 13079460      740.  9678553274.
 6 Afghanistan Asia       1977    38.4 14880372      786. 11697659231.
 7 Afghanistan Asia       1982    39.9 12881816      978. 12598563401.
 8 Afghanistan Asia       1987    40.8 13867957      852. 11820990309.
 9 Afghanistan Asia       1992    41.7 16317921      649. 10595901589.
10 Afghanistan Asia       1997    41.8 22227415      635. 14121995875.
# … with 1,694 more rows</code></pre>
</div>
<p>Notice, that none of the functions changed the original variable <code>gapminder</code>. They only take an input and return and output, which makes it easier to reason about our code and later chain pieces of code together. How do you change it then? Use the Force! … ahem, I mean, the assignment operator (<code>&lt;-</code>).</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>gapminder</span> <span class='op'>&lt;-</span> <span class='fu'>mutate</span><span class='op'>(</span><span class='va'>gapminder</span>, gdp <span class='op'>=</span> <span class='va'>pop</span> <span class='op'>*</span> <span class='va'>gdpPercap</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>Here, the power of dplyr shines. It knows that <code>pop</code> and <code>gdpPercap</code> are columns of the tibble and that <code>gdp</code> refers to the new name of the freshly created column.</p>
<h3 id="interlude-begind-the-magic-handling-data-with-base-r">Interlude: Begind the magic, handling data with base-R</h3>
<p>This section is meant to show you what happens behind the scenes. It is not strictly necessary to understand all the details of it in order to work effectively with the tidyverse, but it helps especially when things don’t go as planned.</p>
<p>So let’s look into handling data with base-R. Last week we briefly covered subsetting of vectors by their indices, their names, or a logical vector:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>x</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>42</span>, <span class='fl'>1</span>, <span class='fl'>13</span>, <span class='fl'>29</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/names.html'>names</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"first"</span>, <span class='st'>"second"</span>, <span class='st'>"third"</span>, <span class='st'>"fourth"</span><span class='op'>)</span>
<span class='va'>x</span>
</code></pre>
</div>
<pre><code> first second  third fourth 
    42      1     13     29 </code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>x</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>,<span class='fl'>3</span><span class='op'>)</span><span class='op'>]</span>
</code></pre>
</div>
<pre><code>first third 
   42    13 </code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>x</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"first"</span>, <span class='st'>"second"</span><span class='op'>)</span><span class='op'>]</span>
</code></pre>
</div>
<pre><code> first second 
    42      1 </code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>x</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='cn'>TRUE</span>, <span class='cn'>FALSE</span>, <span class='cn'>FALSE</span>, <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>]</span>
</code></pre>
</div>
<pre><code> first fourth 
    42     29 </code></pre>
</div>
<p>This subsetting with a logical vector can be used to filter the vector:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>select_this</span> <span class='op'>&lt;-</span> <span class='va'>x</span> <span class='op'>&lt;</span> <span class='fl'>20</span>
<span class='va'>select_this</span>
</code></pre>
</div>
<pre><code> first second  third fourth 
 FALSE   TRUE   TRUE  FALSE </code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>x</span><span class='op'>[</span><span class='va'>select_this</span><span class='op'>]</span>
</code></pre>
</div>
<pre><code>second  third 
     1     13 </code></pre>
</div>
<p>With data in 2 dimensions, rows and columns, subsetting works similarly. Let’s use the function <code>tibble</code> to create a tibble from vectors:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>my_data</span> <span class='op'>&lt;-</span> <span class='fu'>tibble</span><span class='op'>(</span>
  x <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>42</span>, <span class='fl'>1</span>, <span class='fl'>13</span>, <span class='fl'>29</span><span class='op'>)</span>,
  y <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fl'>2</span>, <span class='fl'>3</span>, <span class='fl'>4</span><span class='op'>)</span>,
  z <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"z1"</span>, <span class='st'>"z2"</span>, <span class='st'>"z3"</span>, <span class='st'>"z4"</span><span class='op'>)</span>
<span class='op'>)</span>
<span class='va'>my_data</span>
</code></pre>
</div>
<pre><code># A tibble: 4 x 3
      x     y z    
  &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;
1    42     1 z1   
2     1     2 z2   
3    13     3 z3   
4    29     4 z4   </code></pre>
</div>
<blockquote>
<p>Note:<br />
R is not whitespace sensitive (like python). That means indentation doesn’t change the meaning of the code. We can use this to format our code to look pretty, which is why I started a new line after the opening bracket of <code>tibble(</code>.</p>
</blockquote>
<p>Subsetting a tibble like a vector selects columns:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>my_data</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fl'>3</span><span class='op'>)</span><span class='op'>]</span>
</code></pre>
</div>
<pre><code># A tibble: 4 x 2
      x z    
  &lt;dbl&gt; &lt;chr&gt;
1    42 z1   
2     1 z2   
3    13 z3   
4    29 z4   </code></pre>
</div>
<p>But if you pass two arguments to the square brackets, separated by commata, we can filter rows and select columns Here, we get the first row in the second and third columns:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>my_data</span><span class='op'>[</span><span class='fl'>1</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>2</span>, <span class='fl'>3</span><span class='op'>)</span><span class='op'>]</span>
</code></pre>
</div>
<pre><code># A tibble: 1 x 2
      y z    
  &lt;dbl&gt; &lt;chr&gt;
1     1 z1   </code></pre>
</div>
<p>If we follow the logic above, we can also filter the data. The comma without any argument afterwards selects all columns.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>my_data</span><span class='op'>[</span><span class='va'>my_data</span><span class='op'>$</span><span class='va'>x</span> <span class='op'>&lt;</span> <span class='fl'>20</span>, <span class='op'>]</span>
</code></pre>
</div>
<pre><code># A tibble: 2 x 3
      x     y z    
  &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;
1     1     2 z2   
2    13     3 z3   </code></pre>
</div>
<p>At first glance, the tidyverse way of doing the same is only a little bit shorter. But apart from the fact that we don’t have to repeat the name of the data object <code>my_data</code> (because <code>filter</code> knows where to look for <code>x</code>, whereas <code>[]</code> doesn’t), there is another advantage.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='fu'><a href='https://rdrr.io/r/stats/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>my_data</span>, <span class='va'>x</span> <span class='op'>&lt;</span> <span class='fl'>20</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 2 x 3
      x     y z    
  &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;
1     1     2 z2   
2    13     3 z3   </code></pre>
</div>
<h3 id="the-pipe">The pipe <code>%&gt;%</code></h3>
<p>The tidyverse functions are easier to compose (i.e. chain together). To facilitate this, we introduce another operator, a bit like <code>+</code> for numbers or the <code>+</code> to add ggplot components, but specially for functions. The pipe, which you can either type or insert in RStudio with <strong>Ctrl+Shift+M</strong>, takes it’s left side and passes it as the first argument to the function on the right side:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>my_data</span> <span class='op'>%&gt;%</span> <span class='fu'>select</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>z</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 4 x 2
      x z    
  &lt;dbl&gt; &lt;chr&gt;
1    42 z1   
2     1 z2   
3    13 z3   
4    29 z4   </code></pre>
</div>
<p>And because all main <code>tidyverse</code> functions take data as their first argument, we can chain them together fluently. Additionally, it enables autocompletion of column names inside of the function that gets the data. So back to the gapminder example:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>gapminder</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='https://rdrr.io/r/stats/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>year</span> <span class='op'>&gt;</span> <span class='fl'>2000</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>mutate</span><span class='op'>(</span>gdp <span class='op'>=</span> <span class='va'>pop</span> <span class='op'>*</span> <span class='va'>gdpPercap</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>select</span><span class='op'>(</span><span class='va'>country</span>, <span class='va'>year</span>, <span class='va'>gdp</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 284 x 3
   country      year           gdp
   &lt;chr&gt;       &lt;dbl&gt;         &lt;dbl&gt;
 1 Afghanistan  2002  18363410424.
 2 Afghanistan  2007  31079291949.
 3 Albania      2002  16153932130.
 4 Albania      2007  21376411360.
 5 Algeria      2002 165447670333.
 6 Algeria      2007 207444851958.
 7 Angola       2002  30134833901.
 8 Angola       2007  59583895818.
 9 Argentina    2002 337223430800.
10 Argentina    2007 515033625357.
# … with 274 more rows</code></pre>
</div>
<p>It also reads much nicer in your head, which makes reasoning about the code easier. Without telling you what the above code did, you can understand it, because it reads like English. You can often pronounce the pipe as “and then” in your head, or out-loud, I’m not judging.</p>
<blockquote>
<p>Note:<br />
The base-R and the tidyverse way are not mutually exclusive. Sometimes you can mix and match.</p>
</blockquote>
<h3 id="arrange">arrange</h3>
<p>A simple thing you might want from a table is to sort it based on some column. This is what <code>arrange</code> does:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>gapminder</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>arrange</span><span class='op'>(</span><span class='va'>year</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 1,704 x 7
   country     continent  year lifeExp      pop gdpPercap          gdp
   &lt;chr&gt;       &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;        &lt;dbl&gt;
 1 Afghanistan Asia       1952    28.8  8425333      779.      6.57e 9
 2 Albania     Europe     1952    55.2  1282697     1601.      2.05e 9
 3 Algeria     Africa     1952    43.1  9279525     2449.      2.27e10
 4 Angola      Africa     1952    30.0  4232095     3521.      1.49e10
 5 Argentina   Americas   1952    62.5 17876956     5911.      1.06e11
 6 Australia   Oceania    1952    69.1  8691212    10040.      8.73e10
 7 Austria     Europe     1952    66.8  6927772     6137.      4.25e10
 8 Bahrain     Asia       1952    50.9   120447     9867.      1.19e 9
 9 Bangladesh  Asia       1952    37.5 46886859      684.      3.21e10
10 Belgium     Europe     1952    68    8730405     8343.      7.28e10
# … with 1,694 more rows</code></pre>
</div>
<p>The helper function <code>desc</code> marks a column to be arranged in descending order. We can arrange by multiple columns, where the first will be most important.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>gapminder</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>arrange</span><span class='op'>(</span><span class='fu'>desc</span><span class='op'>(</span><span class='va'>year</span><span class='op'>)</span>, <span class='va'>pop</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>select</span><span class='op'>(</span><span class='va'>country</span>, <span class='va'>year</span>, <span class='va'>pop</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>rename</span><span class='op'>(</span>population <span class='op'>=</span> <span class='va'>pop</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 1,704 x 3
   country                year population
   &lt;chr&gt;                 &lt;dbl&gt;      &lt;dbl&gt;
 1 Sao Tome and Principe  2007     199579
 2 Iceland                2007     301931
 3 Djibouti               2007     496374
 4 Equatorial Guinea      2007     551201
 5 Montenegro             2007     684736
 6 Bahrain                2007     708573
 7 Comoros                2007     710960
 8 Reunion                2007     798094
 9 Trinidad and Tobago    2007    1056608
10 Swaziland              2007    1133066
# … with 1,694 more rows</code></pre>
</div>
<p>I also introduced the <code>rename</code> verb without warning. It does what it says it does, only the order of the names might be confusing. The new name comes first (like when you are creating a new column with <code>mutate</code>). You can also rename within <code>select</code>:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>gapminder</span> <span class='op'>%&gt;%</span> <span class='fu'>select</span><span class='op'>(</span><span class='va'>country</span>, <span class='va'>year</span>, population <span class='op'>=</span> <span class='va'>pop</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 1,704 x 3
   country      year population
   &lt;chr&gt;       &lt;dbl&gt;      &lt;dbl&gt;
 1 Afghanistan  1952    8425333
 2 Afghanistan  1957    9240934
 3 Afghanistan  1962   10267083
 4 Afghanistan  1967   11537966
 5 Afghanistan  1972   13079460
 6 Afghanistan  1977   14880372
 7 Afghanistan  1982   12881816
 8 Afghanistan  1987   13867957
 9 Afghanistan  1992   16317921
10 Afghanistan  1997   22227415
# … with 1,694 more rows</code></pre>
</div>
<h3 id="summarise">summarise</h3>
<p>To condense one or multiple columns into summary values, we use <code>summarise</code>: Like with mutate, we can calculate multiple things in one step.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>gapminder</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>summarise</span><span class='op'>(</span>
    last_year <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/Extremes.html'>max</a></span><span class='op'>(</span><span class='va'>year</span><span class='op'>)</span>,
    average_pop <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span><span class='op'>(</span><span class='va'>pop</span><span class='op'>)</span>,
    minimal_gdp <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/Extremes.html'>min</a></span><span class='op'>(</span><span class='va'>gdp</span><span class='op'>)</span>
  <span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 1 x 3
  last_year average_pop minimal_gdp
      &lt;dbl&gt;       &lt;dbl&gt;       &lt;dbl&gt;
1      2007   29601212.   52784691.</code></pre>
</div>
<p>But condensing whole columns into one value, flattening the tibble in the style of Super Mario jumping on mushrooms, is often not what we need. We would rather know the summaries within certain groups. For example the maximal gdp <strong>per country</strong>. This is what <code>group_by</code> is for.</p>
<h3 id="group_by">group_by</h3>
<p><code>group_by</code> is considered an adverb, because it doesn’t change the data itself but it changes how subsequent functions handle the data. For example, if a tibble has groups, all summaries are calculated within these groups:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>gapminder</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>group_by</span><span class='op'>(</span><span class='va'>country</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 1,704 x 7
# Groups:   country [142]
   country     continent  year lifeExp      pop gdpPercap          gdp
   &lt;chr&gt;       &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;        &lt;dbl&gt;
 1 Afghanistan Asia       1952    28.8  8425333      779.  6567086330.
 2 Afghanistan Asia       1957    30.3  9240934      821.  7585448670.
 3 Afghanistan Asia       1962    32.0 10267083      853.  8758855797.
 4 Afghanistan Asia       1967    34.0 11537966      836.  9648014150.
 5 Afghanistan Asia       1972    36.1 13079460      740.  9678553274.
 6 Afghanistan Asia       1977    38.4 14880372      786. 11697659231.
 7 Afghanistan Asia       1982    39.9 12881816      978. 12598563401.
 8 Afghanistan Asia       1987    40.8 13867957      852. 11820990309.
 9 Afghanistan Asia       1992    41.7 16317921      649. 10595901589.
10 Afghanistan Asia       1997    41.8 22227415      635. 14121995875.
# … with 1,694 more rows</code></pre>
</div>
<p>For example, let’s look at the range of the life expectancy for each country:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>gapminder</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>group_by</span><span class='op'>(</span><span class='va'>country</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>summarise</span><span class='op'>(</span>lower_life_exp <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/Extremes.html'>min</a></span><span class='op'>(</span><span class='va'>lifeExp</span><span class='op'>)</span>,
            upper_life_exp <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/Extremes.html'>max</a></span><span class='op'>(</span><span class='va'>lifeExp</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 142 x 3
   country     lower_life_exp upper_life_exp
   &lt;chr&gt;                &lt;dbl&gt;          &lt;dbl&gt;
 1 Afghanistan           28.8           43.8
 2 Albania               55.2           76.4
 3 Algeria               43.1           72.3
 4 Angola                30.0           42.7
 5 Argentina             62.5           75.3
 6 Australia             69.1           81.2
 7 Austria               66.8           79.8
 8 Bahrain               50.9           75.6
 9 Bangladesh            37.5           64.1
10 Belgium               68             79.4
# … with 132 more rows</code></pre>
</div>
<p><code>summarize</code> removes one level of grouping. If the data was grouped by multiple features, this means that some groups remain. We can make sure that the data is no longer grouped with <code>ungroup</code>.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>gapminder</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>group_by</span><span class='op'>(</span><span class='va'>continent</span>, <span class='va'>year</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>summarise</span><span class='op'>(</span>mean_gdpPercap <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span><span class='op'>(</span><span class='va'>gdpPercap</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>ungroup</span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 60 x 3
   continent  year mean_gdpPercap
   &lt;chr&gt;     &lt;dbl&gt;          &lt;dbl&gt;
 1 Africa     1952          1253.
 2 Africa     1957          1385.
 3 Africa     1962          1598.
 4 Africa     1967          2050.
 5 Africa     1972          2340.
 6 Africa     1977          2586.
 7 Africa     1982          2482.
 8 Africa     1987          2283.
 9 Africa     1992          2282.
10 Africa     1997          2379.
# … with 50 more rows</code></pre>
</div>
<p>Groups also work within <code>mutate</code> and <code>filter</code>. For example, we can get all rows where the gdp per Person was highest per country:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>gapminder</span> <span class='op'>%&gt;%</span>
  <span class='fu'>group_by</span><span class='op'>(</span><span class='va'>country</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='https://rdrr.io/r/stats/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>gdpPercap</span> <span class='op'>==</span> <span class='fu'><a href='https://rdrr.io/r/base/Extremes.html'>max</a></span><span class='op'>(</span><span class='va'>gdpPercap</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 142 x 7
# Groups:   country [142]
   country     continent  year lifeExp      pop gdpPercap          gdp
   &lt;chr&gt;       &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;        &lt;dbl&gt;
 1 Afghanistan Asia       1982    39.9   1.29e7      978.      1.26e10
 2 Albania     Europe     2007    76.4   3.60e6     5937.      2.14e10
 3 Algeria     Africa     2007    72.3   3.33e7     6223.      2.07e11
 4 Angola      Africa     1967    36.0   5.25e6     5523.      2.90e10
 5 Argentina   Americas   2007    75.3   4.03e7    12779.      5.15e11
 6 Australia   Oceania    2007    81.2   2.04e7    34435.      7.04e11
 7 Austria     Europe     2007    79.8   8.20e6    36126.      2.96e11
 8 Bahrain     Asia       2007    75.6   7.09e5    29796.      2.11e10
 9 Bangladesh  Asia       2007    64.1   1.50e8     1391.      2.09e11
10 Belgium     Europe     2007    79.4   1.04e7    33693.      3.50e11
# … with 132 more rows</code></pre>
</div>
<p>Or we can use groups in <code>mutate</code> to find out, what percentage of it’s continent a country’s population makes up per year:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>gapminder</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>group_by</span><span class='op'>(</span><span class='va'>continent</span>, <span class='va'>year</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>mutate</span><span class='op'>(</span>pctPop <span class='op'>=</span> <span class='va'>pop</span> <span class='op'>/</span> <span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='va'>pop</span><span class='op'>)</span> <span class='op'>*</span> <span class='fl'>100</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 1,704 x 8
# Groups:   continent, year [60]
   country   continent  year lifeExp     pop gdpPercap      gdp pctPop
   &lt;chr&gt;     &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;  &lt;dbl&gt;
 1 Afghanis… Asia       1952    28.8  8.43e6      779.  6.57e 9  0.604
 2 Afghanis… Asia       1957    30.3  9.24e6      821.  7.59e 9  0.591
 3 Afghanis… Asia       1962    32.0  1.03e7      853.  8.76e 9  0.605
 4 Afghanis… Asia       1967    34.0  1.15e7      836.  9.65e 9  0.605
 5 Afghanis… Asia       1972    36.1  1.31e7      740.  9.68e 9  0.608
 6 Afghanis… Asia       1977    38.4  1.49e7      786.  1.17e10  0.624
 7 Afghanis… Asia       1982    39.9  1.29e7      978.  1.26e10  0.494
 8 Afghanis… Asia       1987    40.8  1.39e7      852.  1.18e10  0.483
 9 Afghanis… Asia       1992    41.7  1.63e7      649.  1.06e10  0.521
10 Afghanis… Asia       1997    41.8  2.22e7      635.  1.41e10  0.657
# … with 1,694 more rows</code></pre>
</div>
<p>Sometimes you want to refer to the size of the current group inside of <code>mutate</code> or <code>summarise</code>. The function to to just that is called <code>n()</code>. For example, I wonder how many rows of data we have per year.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>gapminder</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>group_by</span><span class='op'>(</span><span class='va'>year</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>summarise</span><span class='op'>(</span>n <span class='op'>=</span> <span class='fu'>n</span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 12 x 2
    year     n
   &lt;dbl&gt; &lt;int&gt;
 1  1952   142
 2  1957   142
 3  1962   142
 4  1967   142
 5  1972   142
 6  1977   142
 7  1982   142
 8  1987   142
 9  1992   142
10  1997   142
11  2002   142
12  2007   142</code></pre>
</div>
<p>A shortcut for <code>group_by</code> and <code>summarise</code> with <code>n()</code> is the <code>count</code> function:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>gapminder</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>count</span><span class='op'>(</span><span class='va'>year</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 12 x 2
    year     n
   &lt;dbl&gt; &lt;int&gt;
 1  1952   142
 2  1957   142
 3  1962   142
 4  1967   142
 5  1972   142
 6  1977   142
 7  1982   142
 8  1987   142
 9  1992   142
10  1997   142
11  2002   142
12  2007   142</code></pre>
</div>
<p>In general, you might find after solving a particular problem in a couple of steps that there is a more elegant solution. Do not be discouraged by that! It simply means that there is always more to learn, but the tools you already know by now will get you a very long way and set you on the right track.</p>
<p>I think we learned enough dplyr verbs for now. We can treat ourselves to a little ggplot visualization.</p>
<h2 id="visualization-and-our-first-encounter-with-factors">Visualization and our First Encounter with <code>factor</code>s</h2>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>gapminder</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>ggplot</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span><span class='va'>year</span>, <span class='va'>lifeExp</span>, group <span class='op'>=</span> <span class='va'>country</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_line</span><span class='op'>(</span>alpha <span class='op'>=</span> <span class='fl'>0.3</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>facet_wrap</span><span class='op'>(</span><span class='op'>~</span> <span class='va'>continent</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="lecture2_files/figure-html5/unnamed-chunk-44-1.png" width="624" /></p>
</div>
<p>The <code>facet_wrap</code> function slices our plot into theses subplots, a style of plot sometimes referred to as <em>small multiples</em>. At this point you might wonder: “How do I control the order of these facets?” The answer is: With a <code>factor</code>! Any time we have a vector that can be thought of as representing discrete categories (ordered or unordered), we can express this by turning the vector into a factor with the <code>factor</code> function. This enables R’s functions to handle them appropriately. Let’s create a little example. We start out with a character vector.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>animals</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"cat"</span>, <span class='st'>"dog"</span>, <span class='st'>"parrot"</span>, <span class='st'>"whale shark"</span>, <span class='st'>"bear"</span><span class='op'>)</span>
<span class='va'>animals</span>
</code></pre>
</div>
<pre><code>[1] &quot;cat&quot;         &quot;dog&quot;         &quot;parrot&quot;      &quot;whale shark&quot;
[5] &quot;bear&quot;       </code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>animals</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>factor</a></span><span class='op'>(</span><span class='va'>animals</span><span class='op'>)</span>
<span class='va'>animals</span>
</code></pre>
</div>
<pre><code>[1] cat         dog         parrot      whale shark bear       
Levels: bear cat dog parrot whale shark</code></pre>
</div>
<p>Note the new information R gives us, the <strong>Levels</strong>, which is all possible values we can put into the factor. They are automatically ordered alphabetically on creation. We can also pass a vector of levels on creation.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>animals</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"cat"</span>, <span class='st'>"dog"</span>, <span class='st'>"parrot"</span>, <span class='st'>"whale shark"</span>, <span class='st'>"bear"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/factor.html'>factor</a></span><span class='op'>(</span><span class='va'>animals</span>, levels <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"parrot"</span>, <span class='st'>"cat"</span>, <span class='st'>"dog"</span>, <span class='st'>"bear"</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] cat    dog    parrot &lt;NA&gt;   bear  
Levels: parrot cat dog bear</code></pre>
</div>
<p>A factor can only contain elements that are in the levels, so because I omitted the whale shark, it will be turned into <code>NA</code>. The tidyverse contains the <code>forcats</code> package to help with factors. Most functions from this package start with <code>fct_</code>.</p>
<aside>
<p><a href="https://forcats.tidyverse.org/"></p>
<div class="layout-chunk" data-layout="l-body">
<p><img src="img/forcats.png" width="120" class=external /></p>
</div>
<p></a></p>
</aside>
<p>For example, the <code>fct_relevel</code> function, which keeps all levels but let’s us change the order:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>animals</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>factor</a></span><span class='op'>(</span><span class='va'>animals</span><span class='op'>)</span>
<span class='fu'>fct_relevel</span><span class='op'>(</span><span class='va'>animals</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"parrot"</span>, <span class='st'>"dog"</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] cat         dog         parrot      whale shark bear       
Levels: parrot dog bear cat whale shark</code></pre>
</div>
<p>Using this in action, we get:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>plt</span> <span class='op'>&lt;-</span> <span class='va'>gapminder</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>mutate</span><span class='op'>(</span>continent <span class='op'>=</span> <span class='fu'>fct_relevel</span><span class='op'>(</span><span class='va'>continent</span>, <span class='st'>"Europe"</span>, <span class='st'>"Oceania"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>ggplot</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span><span class='va'>year</span>, <span class='va'>lifeExp</span>, group <span class='op'>=</span> <span class='va'>country</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_line</span><span class='op'>(</span>alpha <span class='op'>=</span> <span class='fl'>0.3</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>facet_wrap</span><span class='op'>(</span><span class='op'>~</span> <span class='va'>continent</span><span class='op'>)</span>

<span class='va'>plt</span>
</code></pre>
</div>
<p><img src="lecture2_files/figure-html5/unnamed-chunk-49-1.png" width="624" /></p>
</div>
<p>I saved the plot to a variable called <code>plt</code> because we need it later. Let’s make this plot a bit prettier by adding color! The <code>gapminder</code> package that provided this dataset also included a nice color palette. I included it as a <code>.csv</code> file in the <code>data/</code> folder so that we can practice importing data once more. But you could also take the shortcut of getting it straight from the package (<code>gapminder::country_colors</code>). Here, we are using the <code>head</code> function to look at the first couple of rows of the tibble and to look at the first couple of elements of the named vector from the package.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>country_colors</span> <span class='op'>&lt;-</span> <span class='fu'>read_csv</span><span class='op'>(</span><span class='st'>"data/country_colors.csv"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='va'>country_colors</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 6 x 2
  country          color  
  &lt;chr&gt;            &lt;chr&gt;  
1 Nigeria          #7F3B08
2 Egypt            #833D07
3 Ethiopia         #873F07
4 Congo, Dem. Rep. #8B4107
5 South Africa     #8F4407
6 Sudan            #934607</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'>gapminder</span><span class='fu'>::</span><span class='va'><a href='https://rdrr.io/pkg/gapminder/man/country_colors.html'>country_colors</a></span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>         Nigeria            Egypt         Ethiopia Congo, Dem. Rep. 
       &quot;#7F3B08&quot;        &quot;#833D07&quot;        &quot;#873F07&quot;        &quot;#8B4107&quot; 
    South Africa            Sudan 
       &quot;#8F4407&quot;        &quot;#934607&quot; </code></pre>
</div>
<p>Notice, that the csv that we read in translates to a tibble with two columns, namely <code>country</code> and <code>color</code>. But what we need for ggplot to assign colors to the countries is what the gapminder package provides: a names vector. The names are the countries and the values so called hexadecimal (short Hex) color codes (<a href="https://www.w3schools.com/colors/colors_hexadecimal.asp" class="uri">https://www.w3schools.com/colors/colors_hexadecimal.asp</a>). So what we want to do is translate the tibble into a named vector:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>country_colors</span> <span class='op'>&lt;-</span> <span class='va'>country_colors</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>mutate</span><span class='op'>(</span>color <span class='op'>=</span> <span class='fu'>set_names</span><span class='op'>(</span><span class='va'>color</span>, <span class='va'>country</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>pull</span><span class='op'>(</span><span class='va'>color</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='va'>country_colors</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>         Nigeria            Egypt         Ethiopia Congo, Dem. Rep. 
       &quot;#7F3B08&quot;        &quot;#833D07&quot;        &quot;#873F07&quot;        &quot;#8B4107&quot; 
    South Africa            Sudan 
       &quot;#8F4407&quot;        &quot;#934607&quot; </code></pre>
</div>
<p>Two things happened here that are sort of new. <code>set_names</code> is a handy way to take a vector and return a vector with names. It fits better into the tidyverse syntax than the “old” way of assigning to <code>names(x) &lt;- c("new", "names", "vector")</code>. And secondly <code>pull</code> can be though of as a <em>pipeable dollar</em>. It pulls out the column of a tibble or the element of a named list.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>gapminder</span><span class='op'>$</span><span class='va'>year</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] 1952 1957 1962 1967 1972 1977</code></pre>
<div class="sourceCode">
<pre><code><span class='va'>gapminder</span> <span class='op'>%&gt;%</span> <span class='fu'>pull</span><span class='op'>(</span><span class='va'>year</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] 1952 1957 1962 1967 1972 1977</code></pre>
</div>
<p>Now, with our color vector ready to go, we can make the plot pretty. Remember the variable we saved our plot to? We can add more ggplot functions to it just like to a regular ggplot. A <code>guide</code> is the generalization of a legend, so we are setting it to <em>none</em> because adding a legend for 142 different colors (/countries) would fill the whole plot.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>plt</span> <span class='op'>+</span>
  <span class='fu'>aes</span><span class='op'>(</span>color <span class='op'>=</span> <span class='va'>country</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>scale_color_manual</span><span class='op'>(</span>values <span class='op'>=</span> <span class='va'>country_colors</span>, guide <span class='op'>=</span> <span class='fu'>guide_none</span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>theme_minimal</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'>labs</span><span class='op'>(</span>x <span class='op'>=</span> <span class='st'>""</span>,
       y <span class='op'>=</span> <span class='st'>"Life Expectancy at Birth"</span>,
       title <span class='op'>=</span> <span class='st'>"Life Expectancy over Time"</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="lecture2_files/figure-html5/prev-plt-1.png" width="624" data-distill-preview=1 /></p>
</div>
<p>We also added a theme and modified the axis titles. You might have already notice a number of very pronounced dips in some of the lines. We will investigate this rather bleak reality when we talk about modeling and iteration next week.</p>
<h1 id="exercises">Exercises</h1>
<ul>
<li>Drink a cup of coffee or tea, relax, because you just worked through quite a long video.</li>
<li>Familiarize yourself with the folders on your computer. Make sure you understand, where your directories and files live.</li>
<li>From RStudio, create a new RStudio project for this course.
<ul>
<li>Inside the project folder, create a folder for the data.</li>
<li>Create a new Rmarkdown document at the top level of your project folder for today’s exercises, again including questions that came up during the course.</li>
<li>Download the data for today in one of the ways taught. You can refer to the script anytime.</li>
<li>Make sure you have all the important settings set and are feeling right at home in RStudio.</li>
</ul></li>
<li>The file <code>./data/exercise1.txt</code> is in an unfamiliar format.
<ul>
<li>Find out how it is structured and read it as a tibble.</li>
<li>Create a scatterplot of the x and y column with ggplot2.</li>
<li>Look at the help page for <code>geom_point</code>. What is the difference between <code>geom_point(aes(color = &lt;something&gt;))</code> and <code>geom_point(color = &lt;something&gt;)</code>? A relevant hint is in the section about the <code>...</code>-argument.</li>
<li>Make the plot pretty by coloring the points, keeping in mind the above distinction.</li>
</ul></li>
<li>Read in the <code>gapminder</code> dataset with <code>readr</code>
<ul>
<li>Using a combination of <code>dplyr</code> verbs and / or visualizations with <code>ggplot2</code>, answer the following questions:</li>
<li>Which continent had the highest life expectancy on average in the most current year? There are two options here. First, calculate a simple mean for the countries in each continent. Then, remember that the countries have different population sizes, so we really need a <em>weighted mean</em> using R’s function <code>weighted.mean()</code>.</li>
<li>Is there a relationship between the GDP per capita and the life expectancy? A visualization might be helpful.</li>
<li>How did the population of the countries change over time? Make the plot more informative by adding color, facets and labels (with <code>geom_text</code>). Can you find out, how to add the country name label only to the last year? Hint: Have a look at the <code>data</code> argument that all <code>geom_</code>-functions have.</li>
</ul></li>
</ul>
<h1 id="resources">Resources</h1>
<h2 id="package-documentation">Package Documentation</h2>
<ul>
<li><a href="https://www.tidyverse.org/">The tidyverse website</a></li>
<li><a href="https://readr.tidyverse.org/">The readr package website with cheatsheet</a></li>
<li><a href="https://dplyr.tidyverse.org/">The dplyr package website with cheatsheet</a></li>
</ul>
<h2 id="getting-help">Getting Help</h2>
<ul>
<li><a href="https://www.tidyverse.org/help/#reprex">How to find help</a></li>
<li><a href="https://www.rfordatasci.com/">R4DS online learning community</a></li>
</ul>
<div class="sourceCode" id="cb46"><pre class="sourceCode r distill-force-highlighting-css"><code class="sourceCode r"></code></pre></div>
<div id="refs" class="references csl-bib-body hanging-indent" role="doc-bibliography">
<div id="ref-ArtworkAllisonHorst" class="csl-entry" role="doc-biblioentry">
<span>“Artwork by @allison_horst.”</span> 2020. https://github.com/allisonhorst/stats-illustrations.
</div>
<div id="ref-bryanGapminderDataGapminder2017" class="csl-entry" role="doc-biblioentry">
Bryan, Jennifer. 2017. <em>Gapminder: <span>Data</span> from Gapminder</em>. Manual.
</div>
<div id="ref-wickhamDataScienceImport2017" class="csl-entry" role="doc-biblioentry">
Wickham, Hadley, and Garrett Grolemund. 2017. <em>R for <span>Data Science</span>: <span>Import</span>, <span>Tidy</span>, <span>Transform</span>, <span>Visualize</span>, and <span>Model Data</span></em>. 1 edition. <span>Sebastopol, CA</span>: <span>O’Reilly Media</span>.
</div>
</div>
<!--radix_placeholder_article_footer-->
<div class="article-footer">
  <p class="social_footer">
    <span class="article-sharing">
      Share: &nbsp;
      <a href="https://twitter.com/share?text=Lecture%202&amp;url=https%3A%2F%2Fjmbuhr.de%2FdataIntro20%2Flectures%2Flecture2%2F">
        <i class="fab fa-twitter"></i>
      </a>
      <a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3A%2F%2Fjmbuhr.de%2FdataIntro20%2Flectures%2Flecture2%2F&amp;title=Lecture%202">
        <i class="fab fa-linkedin"></i>
      </a>
    </span>
  </p>
</div>
<!--/radix_placeholder_article_footer-->
</div>

<div class="d-appendix">
</div>


<!--radix_placeholder_site_after_body-->
<!--/radix_placeholder_site_after_body-->
<!--radix_placeholder_appendices-->
<div class="appendix-bottom">
  <h3 id="references">References</h3>
  <div id="references-listing"></div>
  <h3 id="updates-and-corrections">Corrections</h3>
  <p>If you see mistakes or want to suggest changes, please <a href="https://github.com/jmbuhr/dataIntro20/issues/new">create an issue</a> on the source repository.</p>
  <h3 id="reuse">Reuse</h3>
  <p>Text and figures are licensed under Creative Commons Attribution <a rel="license" href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a>. Source code is available at <a href="https://github.com/jmbuhr/dataIntro20">https://github.com/jmbuhr/dataIntro20</a>, unless otherwise noted. The figures that have been reused from other sources don't fall under this license and can be recognized by a note in their caption: "Figure from ...".</p>
  <h3 id="citation">Citation</h3>
  <p>For attribution, please cite this work as</p>
  <pre class="citation-appendix short">Buhr (2020, Nov. 7). Introduction to Data Analysis with R: Lecture 2. Retrieved from https://jmbuhr.de/dataIntro20/lectures/lecture2/</pre>
  <p>BibTeX citation</p>
  <pre class="citation-appendix long">@misc{buhr2020lecture,
  author = {Buhr, Jannik},
  title = {Introduction to Data Analysis with R: Lecture 2},
  url = {https://jmbuhr.de/dataIntro20/lectures/lecture2/},
  year = {2020}
}</pre>
</div>
<!--/radix_placeholder_appendices-->
<!--radix_placeholder_navigation_after_body-->
<!--/radix_placeholder_navigation_after_body-->

</body>

</html>
